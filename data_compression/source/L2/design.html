

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kernel Design &mdash; LZ Compression Library 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/xf-favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Kernel APIs Reference" href="api_reference.html" />
    <link rel="prev" title="L2 Kernel User Guide" href="L2.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Library Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#trademark-notice">Trademark Notice</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usecase.html">Typical Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/L1.html">L1 Module User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="L2.html">L2 Kernel User Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Kernel Design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compression-kernel-design">Compression Kernel Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decompression-kernel-design">Decompression Kernel Design</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html">Kernel APIs Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="demo.html">Demo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../L3/L3.html">L3 Overlay User Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Benchmark Results</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../results.html">Benchmark Results</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">LZ Compression Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="L2.html">L2 Kernel User Guide</a> &raquo;</li>
        
      <li>Kernel Design</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/source/L2/design.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kernel-design">
<h1>Kernel Design<a class="headerlink" href="#kernel-design" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Xilinx LZ data compression architecture is targeted for FPGAs. It aims to provide high throughput. This architecture is developed and tested on Xilinx Alveo U200. Even though this architecture is designed for LZ4 application, but it is generic enough to support various other LZ based data compression algorithms like Snappy, LZ77 and LZO.</p>
<p>Xilinx FPGA based LZ data-compression architecture contains multiple compression engines which run concurrently to get higher throughput. Each compression engine is designed to process 1 byte/clock cycle &#64;300MHz. So, if design contains <strong>N</strong> compression engines, overall throughput will be <code class="docutils literal notranslate"><span class="pre">N</span> <span class="pre">x</span> <span class="pre">300MB/s</span></code>. That means if we have <strong>8</strong> compression engines, then overall throuput will be <code class="docutils literal notranslate"><span class="pre">8</span> <span class="pre">x</span> <span class="pre">300</span> <span class="pre">=</span> <span class="pre">2.4GB/s</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a generic architecture to cover all LZ based algorithms (LZ77, LZ4, LZO and Snappy).</p>
</div>
</div>
<div class="section" id="compression-kernel-design">
<h2>Compression Kernel Design<a class="headerlink" href="#compression-kernel-design" title="Permalink to this headline">¶</a></h2>
<p>The design for LZ compression kernel is shown in figure below.</p>
<a class="reference internal image-reference" href="../../_images/lzx_comp.png"><img alt="LZ based Compression Kernel" class="align-center" src="../../_images/lzx_comp.png" style="width: 100%;" /></a>
<p>Input data is divided into muliple blocks with 64K default block size(user configurable). Each block is sent to individual compression engine to compress concurrently in round-robin fashion.</p>
<p>Input unit(<strong>mm2s</strong> block) reads the uncompressed blocks from global memory(512 bit wide) and distribute them across multiple parallel compression engines. Output unit(<strong>s2mm</strong> block) reads compressed block from compression engines and writes to global memory.</p>
<p>Each Compression engine contains series of sub-modules, which process data parallelly and work in pipelined fashion. Each sub-module transfer data to next module using HLS streams. Each sub-module is designed to process 1 byte/clock cycle, which along with pipelined processing, makes the throughput of each compression will be 1 byte/clock cycle.</p>
<p>Data read from global memory is converted to byte stream by <strong>mm2s</strong> block and back to memory mapped from stream by <strong>s2mm</strong> block for writing to global memory.</p>
<p>The compression engine design remains same for all LZ based compression algorithms. Only difference will be the <strong>Encoding</strong> sub-module in compression engine module, which will be unique for each algorithm.</p>
</div>
<div class="section" id="decompression-kernel-design">
<h2>Decompression Kernel Design<a class="headerlink" href="#decompression-kernel-design" title="Permalink to this headline">¶</a></h2>
<p>The design for LZ decompression kernel is shown in figure below.</p>
<a class="reference internal image-reference" href="../../_images/lzx_decomp.png"><img alt="LZ based Decompression Kernel" class="align-center" src="../../_images/lzx_decomp.png" style="width: 100%;" /></a>
<p>The overall design remains similar to the compression kernel design. Input data is read from the global memory, converted to stream and distributed across the decompression engines in round robin fashion.</p>
<p>Each decompression engine module contains multiple sub-modules processing 1 byte per clock cycle. Since the modules work in pipelined fashion, therefore, the throughput of each decompression engine is 1 byte per clock cycle.</p>
<p>The decompression engine desing also remains same for all LZ based algorithms. Only difference will be the <strong>Decoding</strong>  sub-module in decompression engine module, which will be unique for each algorithm.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api_reference.html" class="btn btn-neutral float-right" title="Kernel APIs Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="L2.html" class="btn btn-neutral float-left" title="L2 Kernel User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Xilinx Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>