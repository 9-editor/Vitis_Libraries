


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta content="BLAS, Library, Vitis BLAS Library, L3, level 3" name="keywords" />
<meta content="Vitis BLAS library level 3 application programming interface reference. Intel Math Kernel Library provides performance improvement of math functions, e.g. GEMM, when running with Intel processors." name="description" />
<meta content="Document" name="xlnxdocumentclass" />
<meta content="Tutorials" name="xlnxdocumenttype" />

		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>	
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>		
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>	
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>	
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>	
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>		
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="L3 API test" href="L3_test.html" />
    <link rel="prev" title="L3 API benchmark" href="L3_benchmark.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search" 
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a> 
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search" 
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis BLAS Library
          

          
          </a>

          
            
            
              <div class="version">
                2020.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Library Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#trademark-notice">Trademark Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">Release Note</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../L1/L1.html">L1 Primitives User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/L2.html">L2 Kernels User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="L3.html">L3 API User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="L3_overview.html">L3 API Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="L3_example.html">L3 API example</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="L3_benchmark.html">L3 API benchmark</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">L3 API GEMM benchmark</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#benchmarking-intel-math-kernel-library-mkl">1. Benchmarking Intel® Math Kernel Library (MKL)</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#introduction">1.1 Introduction</a></li>
<li class="toctree-l5"><a class="reference internal" href="#benchmarking-steps">1.2 Benchmarking Steps</a></li>
<li class="toctree-l5"><a class="reference internal" href="#performance-result-on-nimbix-cloud">1.3 Performance Result on Nimbix Cloud</a></li>
<li class="toctree-l5"><a class="reference internal" href="#reference">1.4 Reference</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#benchmarking-xfblasgemm-xilinx-s-vitis-blas-library">2. Benchmarking xfblasGemm - Xilinx’s Vitis BLAS library</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id1">2.1 Benchmarking Steps</a></li>
<li class="toctree-l5"><a class="reference internal" href="#performance-results-on-nimbix-cloud">2.2 Performance Results on Nimbix Cloud</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="L3_test.html">L3 API test</a></li>
<li class="toctree-l2"><a class="reference internal" href="L3_python_bindings.html">L3 Python bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyenvguide.html">Python Environment Setup Guide</a></li>
</ul>
</li>
</ul>

            
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/user_guide/L3/L3_benchmark_gemm.rst.txt"
						rel="nofollow">Show Source</a></li>						
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Vitis BLAS Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="L3.html">L3 API User Guide</a> &raquo;</li>
        
          <li><a href="L3_benchmark.html">L3 API benchmark</a> &raquo;</li>
        
      <li>L3 API GEMM benchmark</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user_guide/L3/L3_benchmark_gemm.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="l3-api-gemm-benchmark">
<span id="benchmark-gemm-l3"></span><h1>L3 API GEMM benchmark<a class="headerlink" href="#l3-api-gemm-benchmark" title="Permalink to this headline">¶</a></h1>
<div class="section" id="benchmarking-intel-math-kernel-library-mkl">
<h2>1. Benchmarking Intel® Math Kernel Library (MKL)<a class="headerlink" href="#benchmarking-intel-math-kernel-library-mkl" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction">
<h3>1.1 Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>Intel® Math Kernel Library provides performance improvement of math functions, e.g. GEMM, when running with Intel processors. To compare with Xilinx’s Vitis BLAS library, you can use our run-script (run_gemm_mkl.sh) to generate the data and performance benchmark.</p>
</div>
<div class="section" id="benchmarking-steps">
<span id="mkl-benchmark"></span><h3>1.2 Benchmarking Steps<a class="headerlink" href="#benchmarking-steps" title="Permalink to this headline">¶</a></h3>
<div class="section" id="access-nimbix-cloud">
<h4>1.2.1 Access Nimbix cloud<a class="headerlink" href="#access-nimbix-cloud" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Follow the user guide <a class="reference external" href="https://www.xilinx.com/xilinxtraining/assessments/portal/alveo/intro_nimbix_cloud/story_html5.html">Vitis On Nimbix</a> to login to your Nimbix account</p></li>
<li><p>Launch application “Xilinx Vitis Unified Software Platform 2020.1” and select “Desktop Mode with FPGA”</p></li>
<li><p>Choose machine type “16 core, 128 GB RAM, Xilinx Alveo U250 FPGA (nx6u_xdma_201830_2_2_3)”</p></li>
<li><p>Copy the L3/bencharks/gemm directory to the Nimbix machine, and navigate to the gemm/gemm_mkl directory</p></li>
<li><p>Follow the steps below to run Intel® MKL GEMM APIsbenchmarks.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FPGA is not required in Intel® Math Kernel Library but will be used in Xilinx’s Vitis BLAS library.</p>
</div>
</div>
<div class="section" id="install-intel-mk-library">
<h4>1.2.2 Install Intel® MK library<a class="headerlink" href="#install-intel-mk-library" title="Permalink to this headline">¶</a></h4>
<p>To install MKL on Nimbix, please download the full installation package for MKL2020 from <a class="reference external" href="https://software.intel.com/en-us/mkl/choose-download/linux">Intel® MKL Webste</a>. You need to register for downloading the package. After you have downloaded the package, please unzip it and navigate to the directory includeing “install.sh”. Please enter the following command to install the MKL package.</p>
<pre class="highlight literal-block"><span></span>sudo ./install.sh</pre>
</div>
<div class="section" id="set-up-mkl-environment-variables">
<h4>1.2.3 Set up MKL environment variables<a class="headerlink" href="#set-up-mkl-environment-variables" title="Permalink to this headline">¶</a></h4>
<p><strong>Intel® MKL</strong>: Assume you have installed Intel® MKL, run the appropriate script to set up the environment variables (such as $MKLROOT).</p>
<pre class="highlight literal-block"><span></span><span class="nb">source</span> &lt;INTEL_MKL_INSTALL_DIR&gt;/bin/mklvars.sh intel64</pre>
</div>
<div class="section" id="install-numactl">
<h4>1.2.4 Install numactl<a class="headerlink" href="#install-numactl" title="Permalink to this headline">¶</a></h4>
<p><strong>NUMACTL</strong>: The linux operating system provides a function, called numactl, that allows the control of scheduling or memory placement policy, which is essential to run parallel programs.</p>
<p>For Ubuntu (you only need to do it once),</p>
<pre class="highlight literal-block"><span></span>sudo apt-get install numactl</pre>
</div>
<div class="section" id="run-mkl-benchmarking-script">
<h4>1.2.5 Run MKL benchmarking script<a class="headerlink" href="#run-mkl-benchmarking-script" title="Permalink to this headline">¶</a></h4>
<p>The run-script runs the GEMM benchmark with a number of threads, data type, and work mode. Then, it will explore the GEMM’s matrix size from 256 to 16384.</p>
<pre class="highlight literal-block"><span></span>./run_gemm_mkl.sh &lt;thread#&gt; &lt;data_type&gt; &lt;mode&gt;</pre>
<p class="rubric">where:</p>
<ul class="simple">
<li><p>thread#: Number of threads to run, e.g. 1, 2, 4, 8, 16, etc.</p></li>
<li><p>data_type: Either <strong>float</strong> or <strong>double</strong>.</p></li>
<li><p>mode: <strong>g</strong> for generating the data, <strong>b</strong> for benchmarking the performance, and <strong>a</strong> for both workloads.</p></li>
</ul>
</div>
</div>
<div class="section" id="performance-result-on-nimbix-cloud">
<h3>1.3 Performance Result on Nimbix Cloud<a class="headerlink" href="#performance-result-on-nimbix-cloud" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Configuration:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>cpu_model</p></td>
<td><p>Intel(R) Xeon(R) CPU E5-2640 v3 &#64; 2.60GHz</p></td>
</tr>
<tr class="row-even"><td><p>thread#</p></td>
<td><p>16</p></td>
</tr>
<tr class="row-odd"><td><p>data_type</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>benchmark command</p></td>
<td><p>./run_gemm_mkl.sh 16 float a</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Performance Result (nonCaching):</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 38%" />
<col style="width: 13%" />
<col style="width: 15%" />
<col style="width: 13%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Square Matrix Size</p></th>
<th class="head"><p>matrix paris running simultaneously</p></th>
<th class="head"><p>Cache (Y/N)</p></th>
<th class="head"><p>API time(ms)</p></th>
<th class="head"><p>TFlops/sec</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>256</p></td>
<td><p>1</p></td>
<td><p>N</p></td>
<td><p>29.700</p></td>
<td><p>0.001</p></td>
</tr>
<tr class="row-odd"><td><p>512</p></td>
<td><p>1</p></td>
<td><p>N</p></td>
<td><p>11.799</p></td>
<td><p>0.023</p></td>
</tr>
<tr class="row-even"><td><p>1024</p></td>
<td><p>1</p></td>
<td><p>N</p></td>
<td><p>16.591</p></td>
<td><p>0.129</p></td>
</tr>
<tr class="row-odd"><td><p>2048</p></td>
<td><p>1</p></td>
<td><p>N</p></td>
<td><p>41.319</p></td>
<td><p>0.416</p></td>
</tr>
<tr class="row-even"><td><p>4096</p></td>
<td><p>1</p></td>
<td><p>N</p></td>
<td><p>172.369</p></td>
<td><p>0.797</p></td>
</tr>
<tr class="row-odd"><td><p>8192</p></td>
<td><p>1</p></td>
<td><p>N</p></td>
<td><p>1073.250</p></td>
<td><p>1.024</p></td>
</tr>
<tr class="row-even"><td><p>16384</p></td>
<td><p>1</p></td>
<td><p>N</p></td>
<td><p>9060.830</p></td>
<td><p>0.971</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Performance Result (Caching):</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 38%" />
<col style="width: 13%" />
<col style="width: 15%" />
<col style="width: 13%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Square Matrix Size</p></th>
<th class="head"><p>matrix paris running simultaneously</p></th>
<th class="head"><p>Cache (Y/N)</p></th>
<th class="head"><p>API time(ms)</p></th>
<th class="head"><p>TFlops/sec</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>256</p></td>
<td><p>1</p></td>
<td><p>Y</p></td>
<td><p>1.380</p></td>
<td><p>0.024</p></td>
</tr>
<tr class="row-odd"><td><p>512</p></td>
<td><p>1</p></td>
<td><p>Y</p></td>
<td><p>4.038</p></td>
<td><p>0.066</p></td>
</tr>
<tr class="row-even"><td><p>1024</p></td>
<td><p>1</p></td>
<td><p>Y</p></td>
<td><p>4.383</p></td>
<td><p>0.490</p></td>
</tr>
<tr class="row-odd"><td><p>2048</p></td>
<td><p>1</p></td>
<td><p>Y</p></td>
<td><p>21.282</p></td>
<td><p>0.807</p></td>
</tr>
<tr class="row-even"><td><p>4096</p></td>
<td><p>1</p></td>
<td><p>Y</p></td>
<td><p>149.755</p></td>
<td><p>0.918</p></td>
</tr>
<tr class="row-odd"><td><p>8192</p></td>
<td><p>1</p></td>
<td><p>Y</p></td>
<td><p>1042.860</p></td>
<td><p>1.054</p></td>
</tr>
<tr class="row-even"><td><p>16384</p></td>
<td><p>1</p></td>
<td><p>Y</p></td>
<td><p>9045.700</p></td>
<td><p>0.972</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="reference">
<h3>1.4 Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h3>
<p>[1] <a class="reference external" href="https://software.intel.com/en-us/articles/improving-performance-of-math-functions-with-intel-math-kernel-library">Improving Performance of Math Functions with Intel® Math Kernel Library</a></p>
<p>[2] <a class="reference external" href="https://software.intel.com/en-us/articles/benchmarking-gemm-with-intel-mkl-and-blis-on-intel-processors">Benchmarking GEMM on Intel® Architecture Processors</a></p>
</div>
</div>
<div class="section" id="benchmarking-xfblasgemm-xilinx-s-vitis-blas-library">
<h2>2. Benchmarking xfblasGemm - Xilinx’s Vitis BLAS library<a class="headerlink" href="#benchmarking-xfblasgemm-xilinx-s-vitis-blas-library" title="Permalink to this headline">¶</a></h2>
<p>Before benchmarking xfblashGemm, please run the following command to build hw xclbin</p>
<pre class="highlight literal-block"><span></span>make build <span class="nv">TARGET</span><span class="o">=</span>hw <span class="nv">PLATFORM_REPO_PATHS</span><span class="o">=</span>LOCAL_PLATFORM_PATH</pre>
<div class="section" id="id1">
<h3>2.1 Benchmarking Steps<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="section" id="generate-test-inputs-and-golden-reference">
<h4>2.1.1 Generate test inputs and golden reference<a class="headerlink" href="#generate-test-inputs-and-golden-reference" title="Permalink to this headline">¶</a></h4>
<p>Follow the <a class="reference internal" href="#mkl-benchmark">MKL_benchmark</a> steps to run MKL benchmarks to generate test inputs and golden reference. To generate test inputs and golden reference for float data type, please run the following command.</p>
<pre class="highlight literal-block"><span></span>./run_gemm_mkl.sh <span class="m">16</span> float a</pre>
</div>
<div class="section" id="build-benchmark-application">
<h4>2.1.2 Build benchmark application<a class="headerlink" href="#build-benchmark-application" title="Permalink to this headline">¶</a></h4>
<p>Before benchmark the xfblasGemm, please build the host executable for the corresponding .xclbin files via following script</p>
<pre class="highlight literal-block"><span></span>./build_gemm_bench.sh config_info_file</pre>
</div>
<div class="section" id="run-benchmark">
<h4>2.1.3 Run benchmark<a class="headerlink" href="#run-benchmark" title="Permalink to this headline">¶</a></h4>
<p>The run-script runs the GEMM benchmark with xclbin and cfg files. It will explore the GEMM’s matrix size from 256 to 8192.</p>
<pre class="highlight literal-block"><span></span>./run_gemm_benchmark.sh xclbin_file config_info_file</pre>
<p class="rubric">where:</p>
<ul class="simple">
<li><p><strong>xclbin_file</strong> refers to the blas.xclbin file, including the path.</p></li>
<li><p><strong>config_info_file</strong> refers to config_info.dat file, including the path.</p></li>
</ul>
</div>
</div>
<div class="section" id="performance-results-on-nimbix-cloud">
<h3>2.2 Performance Results on Nimbix Cloud<a class="headerlink" href="#performance-results-on-nimbix-cloud" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Configuration:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>fpga_model</p></td>
<td><p>Xilinx Alveo U250 FPGA</p></td>
</tr>
<tr class="row-even"><td><p>Frequency</p></td>
<td><p>242 Mhz</p></td>
</tr>
<tr class="row-odd"><td><p>data_type</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>build command</p></td>
<td><p>./build_gemm_bench.sh config_info.dat</p></td>
</tr>
<tr class="row-odd"><td><p>benchmark command</p></td>
<td><p>./run_gemm_bench.sh blas.xclbin config_info.dat</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Performance Result:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 44%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Square Matrix Size</p></th>
<th class="head"><p>matrix paris running simultaneously</p></th>
<th class="head"><p>API time(ms)</p></th>
<th class="head"><p>TFlops/sec</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>256</p></td>
<td><p>4</p></td>
<td><p>2.348</p></td>
<td><p>0.057</p></td>
</tr>
<tr class="row-odd"><td><p>512</p></td>
<td><p>4</p></td>
<td><p>6.422</p></td>
<td><p>0.167</p></td>
</tr>
<tr class="row-even"><td><p>1024</p></td>
<td><p>4</p></td>
<td><p>33.366</p></td>
<td><p>0.257</p></td>
</tr>
<tr class="row-odd"><td><p>2048</p></td>
<td><p>4</p></td>
<td><p>217.949</p></td>
<td><p>0.316</p></td>
</tr>
<tr class="row-even"><td><p>4096</p></td>
<td><p>4</p></td>
<td><p>1595.487</p></td>
<td><p>0.344</p></td>
</tr>
<tr class="row-odd"><td><p>8192</p></td>
<td><p>4</p></td>
<td><p>12587.950</p></td>
<td><p>0.349</p></td>
</tr>
</tbody>
</table>
<p>Please notice that we used OpenMP library for multi-kernel support in host side, so for smaller sizes, total API times include OpenMP initialization time.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>
	  
	  
	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="L3_test.html" class="btn btn-neutral float-right" title="L3 API test" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="L3_benchmark.html" class="btn btn-neutral float-left" title="L3 API benchmark" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">

    </p>
  </div>	  
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>     	    
	    
	    
  
  
    
  
  

  
  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2020, Xilinx Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}
			
			underscoreSetup();
		</script>
	</body>
</html>