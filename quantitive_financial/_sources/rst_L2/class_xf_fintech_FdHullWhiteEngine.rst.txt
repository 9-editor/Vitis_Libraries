.. index:: pair: class; xf::fintech::FdHullWhiteEngine
.. _doxid-classxf_1_1fintech_1_1_fd_hull_white_engine:
.. _cid-xf::fintech::fdhullwhiteengine:

template class xf::fintech::FdHullWhiteEngine
=============================================

.. toctree::
	:hidden:

.. code-block:: cpp
	:class: overview-code-block

	#include <fd_hullwhite_engine.hpp>


Overview
~~~~~~~~

Bermudan swaption pricing engine using Finite-difference methods. :ref:`More...<details-doxid-classxf_1_1fintech_1_1_fd_hull_white_engine>`

.. _doxid-classxf_1_1fintech_1_1_fd_hull_white_engine_1a073a536e8d2149441dbcb4c93ee0f1cc:
.. _cid-xf::fintech::fdhullwhiteengine::array_:
.. ref-code-block:: cpp
	:class: overview-code-block

	template <
	    typename DT,
	    unsigned int _ETSizeMax,
	    unsigned int _xGridMax,
	    unsigned int _legPSizeMax,
	    unsigned int _legRSizeMax
	    >
	class FdHullWhiteEngine

	// fields

	DT array_[_xGridMax]


.. FunctionSection

Methods
~~~~~~~

.. _doxid-classxf_1_1fintech_1_1_fd_hull_white_engine_1af9c784788543e40463765c7843544cb7:
.. _cid-xf::fintech::fdhullwhiteengine::engineinitialization:

engineInitialization
--------------------


Defined in <xf_fintech/fd_hullwhite_engine.hpp>
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


.. ref-code-block:: cpp
	:class: title-code-block

	void engineInitialization (
	    DT stoppingTimes [_ETSizeMax+1],
	    DT payerAccrualTime [_legPSizeMax+1],
	    DT receiverAccrualTime [_legRSizeMax+1],
	    DT receiverAccrualPeriod [_legRSizeMax+1],
	    DT iborTime [_legRSizeMax+1],
	    DT iborPeriod [_legRSizeMax+1],
	    unsigned int ETSize,
	    unsigned int xGrid,
	    unsigned int legPSize,
	    unsigned int legRSize,
	    DT a,
	    DT sigma,
	    DT theta,
	    DT nominal,
	    DT fixedRate,
	    DT floatingRate
	    )

This function is used to build up the FDM equation, and calculate the initialValues(NPVs at maturity), meanwhile, read several initial values from DDR to RAMs or registers.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - stoppingTimes

        - The array which contains every exercise time in sequence with a 0.99 day time point at the front. (the unit should be year)

    *
        - payerAccrualTime

        - The array which contains every payment time in fixed rate. (the unit should be year)

    *
        - receiverAccrualTime

        - The array which contains every payment time in floating rate. (the unit should be year)

    *
        - receiverAccrualPeriod

        - We support multiple day count convention, so this port is given to users to let them decide what kind of day count convention should be applied when calculating the amount of money in a period.

    *
        - iborTime

        - This array is used to calculate the discount at a specific time point.

    *
        - iborPeriod

        - This port is also given to users to let them decide what kind of day count convention should be applied when calculating the actual floating rate in a period.

    *
        - ETSize

        - The actual number of exercise time in the bermudan swaption.

    *
        - xGrid

        - The actual number of NPVs for each time step to calculate.

    *
        - legPSize

        - The actual number of times that payer should pay for the swaption in fixed rate. (depends on payment period)

    *
        - legRSize

        - The actual number of times that payer should receive from the swaption in floating rate. (depends on payment period)

    *
        - a

        - Spreads on interest rates.

    *
        - sigma

        - Overall level of volatility on interest rates.

    *
        - theta

        - Parameter used to build up the differential equation, the pricing engine uses crank-nicolson algorithm, so default value of theta should be 0.5

    *
        - nominal

        - The nominal value of the swap.

    *
        - fixedRate

        - Fixed rate of the swaption. (per year)

    *
        - floatingRate

        - Floating rate of the swaption. (per yaer)

.. _doxid-classxf_1_1fintech_1_1_fd_hull_white_engine_1ae816b9729150e5dff36f851fc5b1fa69:
.. _cid-xf::fintech::fdhullwhiteengine::rollbackimplementation:

rollbackImplementation
----------------------


Defined in <xf_fintech/fd_hullwhite_engine.hpp>
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


.. ref-code-block:: cpp
	:class: title-code-block

	DT rollbackImplementation (
	    DT array [_xGridMax],
	    DT from,
	    DT to,
	    unsigned int tGrid
	    )

This function perform the main rolling back process in bermudan swaption pricing.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - array

        - NPVs at a specific time point.

    *
        - from

        - Start time point of evolve back process.

    *
        - to

        - End time point of evolve back process.

    *
        - tGrid

        - Number of time steps from maturity to settlement date.

