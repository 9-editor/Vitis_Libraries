


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../_static/js/jquery.min.js"></script>	
	  <script type="text/javascript" src="../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../_static/js/common-ui-all.min.js"></script>		
    <script type="text/javascript" src="../_static/js/header-footer.min.js"></script>	
    <script type="text/javascript" src="../_static/js/jquery-ui.min.js"></script>	
    <script type="text/javascript" src="../_static/js/CoveoJsSearch.Lazy.min.js"></script>	
    <script type="text/javascript" src="../_static/js/linkid.js"></script>		
    <script type="text/javascript" src="../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search" 
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a> 
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search" 
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Vitis DSP Library
          

          
          </a>

          
            
            
              <div class="version">
                2019.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Library Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#trademark-notice">Trademark Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release Note</a></li>
</ul>
<p class="caption"><span class="caption-text">L1 User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/L1.html">1-Dimensional(Line) FFT L1 FPGA Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/L1_2dfft.html">2-Dimensional(Matrix) FFT L1 FPGA Module</a></li>
</ul>

            
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../_sources/benchmarks/L2_fft_benchmark.rst.txt"
						rel="nofollow">Show Source</a></li>						
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Vitis DSP Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>L2 FFT Kernel Benchmarks</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/benchmarks/L2_fft_benchmark.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">L2 FFT Kernel Benchmarks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#benchmarking-and-performance-measurements">Benchmarking and Performance Measurements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#list-of-benchmarks">List of Benchmarks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-and-running-the-benchmarks">Building and Running the Benchmarks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuring-fft-kernel">Configuring FFT Kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-host-executable">Building Host Executable</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-xclbin-file-for-fpga-card">Building xclbin File for FPGA Card</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-benchmark">Running the Benchmark</a></li>
<li class="toctree-l4"><a class="reference internal" href="#benchmark-results-log-file">Benchmark Results Log File</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#detailed-instructions-for-running-the-benchmarks-on-nimbix">Detailed Instructions for Running The Benchmarks on Nimbix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#benchmarking-results">Benchmarking Results</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#d-floating-point-fp32-fft-benchmark-results">1D Floating Point(FP32) FFT Benchmark Results</a></li>
<li class="toctree-l4"><a class="reference internal" href="#d-fixed-point-27-bits-fft-benchmark-results">1D Fixed Point(27-bits) FFT Benchmark Results</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">2D Floating Point(FP32) FFT Benchmark Results</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">2D Fixed Point(27 Bits) FFT Benchmark Results</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#benchmarking-measurement-process-and-performance-metrics">Benchmarking Measurement Process and Performance Metrics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#manually-configuring-kernel-parameters">Manually Configuring Kernel Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#d-fft-kernel-parameter-configurations">1D FFT Kernel Parameter Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">2D FFT Kernel Parameter Configurations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fft-benchmarking-on-gpu">FFT Benchmarking on GPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-and-running-the-gpu-benchmark">Building and Running the GPU Benchmark</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#d-cufft-benchmark">1D cuFFT Benchmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-cufft-benchmark-options">1D cuFFT Benchmark Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-cufft-benchmark-results">1D cuFFT Benchmark Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">2D cuFFT Benchmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">2D cuFFT Benchmark Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">2D cuFFT Benchmark Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gpu-benchmarking-measurement-process-and-performance-metrics">GPU Benchmarking Measurement Process and Performance Metrics</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="l2-fft-kernel-benchmarks">
<h1>L2 FFT Kernel Benchmarks<a class="headerlink" href="#l2-fft-kernel-benchmarks" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>L2 FFT benchmarking is done for floating point single precision and fixed point numbers. ALVEO <a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/alveo/u250.html">U250</a> FPGA  is used on <a class="reference external" href="https://www.nimbix.net/">Nimbix</a> cloud. The Vitis 19.2 and XRT 19.2 are used for building overlays for FPGA and host application respectively. Different size of 1D/2D FFT kernels are benchmarked for performance ranging from 256 to 4096 sample for 1D and 16x16 to 256x256 matrices for 2D. All the kernels are described in C++ and built using Vitis 19.2 released version, no RTL component or RTL IP is used for building the kernel.</p>
</div>
<div class="section" id="benchmarking-and-performance-measurements">
<h2>Benchmarking and Performance Measurements<a class="headerlink" href="#benchmarking-and-performance-measurements" title="Permalink to this headline">¶</a></h2>
<p>The benchmarking is done on <a class="reference external" href="https://www.nimbix.net/">Nimbix</a> cloud instance which houses a Xilinx Alveo <a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/alveo/u250.html">U250</a> FPGA Acceleration card. Following sections describe benchmarking procedure, measurement process and the performance results.</p>
<div class="section" id="list-of-benchmarks">
<h3>List of Benchmarks<a class="headerlink" href="#list-of-benchmarks" title="Permalink to this headline">¶</a></h3>
<p>To the run the benchmarks user has to checkin the Xilinx <a class="reference external" href="https://github.com/Xilinx/Vitis_Libraries">Vitis libraries</a>. Go to <code class="docutils literal notranslate"><span class="pre">dsp/L2/benchmarks/FPGA</span></code> folder which contains the Vitis FFT benchmarks. This folder contains different benchmarks for 1D and 2D FFTs as shown below:</p>
<ul class="simple">
<li>1dFix   : 1D Fix Point FFT Benchmark</li>
<li>1dFloat : 1D Floating Point FFT Benchmark</li>
<li>2dFix   : 2D Fix Point FFT Benchmark</li>
<li>2dFloat : 2D Floating Point FFT Benchmark</li>
</ul>
</div>
<div class="section" id="building-and-running-the-benchmarks">
<h3>Building and Running the Benchmarks<a class="headerlink" href="#building-and-running-the-benchmarks" title="Permalink to this headline">¶</a></h3>
<p>Before building the host executable or the xclbin FPGA overlay file please source your local setup scripts for setting paths for XRT and Vitis ( If you are running these benchmarks on <a class="reference external" href="https://www.nimbix.net/">Nimbix</a> cloud, starting terminal automatically setups XRT and Vitis).</p>
<div class="section" id="configuring-fft-kernel">
<h4>Configuring FFT Kernel<a class="headerlink" href="#configuring-fft-kernel" title="Permalink to this headline">¶</a></h4>
<p>Every benchmark is pre-configured with a specific size and data-path for given kernel and to run a benchmark it is not required to change the these configurations. The results reported in the next section for different size of 1D/2D FFT are generated by varying these configurations. Every variation of FFT kernel size requires re-building of host and the xclbin. The section-xxx describes the details of how to configure these different parameters for running benchmarks.</p>
</div>
<div class="section" id="building-host-executable">
<h4>Building Host Executable<a class="headerlink" href="#building-host-executable" title="Permalink to this headline">¶</a></h4>
<p>To run a benchmark navigate to any of the benchmarks for 1D/2D FFT with fix point or floating point data type as needed. Every benchmark has a Makefile which can be used to build host executable namely <code class="docutils literal notranslate"><span class="pre">host</span></code>. Following command will build a host executable called <code class="docutils literal notranslate"><span class="pre">host</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">host</span></code></p>
</div>
<div class="section" id="building-xclbin-file-for-fpga-card">
<h4>Building xclbin File for FPGA Card<a class="headerlink" href="#building-xclbin-file-for-fpga-card" title="Permalink to this headline">¶</a></h4>
<p>The xclbin overlay file for benchmark can be built using the following command:</p>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">build</span> <span class="pre">TARGET=hw</span> <span class="pre">DEVICE=../../../xilinx_u250_xdma_201830_2.xpfm</span></code></p>
<p>The above command will build the xclbin in directory whose name starts with build_dir.hw.
During benchmarking the <code class="docutils literal notranslate"><span class="pre">xilinx_u250_xdma_201830_2.xpfm</span></code> shell was used. But the benchmark can also be built and ran on other cards like <a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/alveo/u200.html">U200</a>, <a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/alveo/u280.html">U280</a> etc.</p>
</div>
<div class="section" id="running-the-benchmark">
<h4>Running the Benchmark<a class="headerlink" href="#running-the-benchmark" title="Permalink to this headline">¶</a></h4>
<p>Once the host executable and xclbin files are built, benchmark run can be launched as follows:
<strong>If you have built 1D FFT kernel floating or fixed point</strong> use the following command to run the benchmark:</p>
<p><code class="docutils literal notranslate"><span class="pre">./host</span> <span class="pre">fft1dkernel.xclbin</span> <span class="pre">numOfBatches</span> <span class="pre">benchamrk_results_file_name.csv</span></code></p>
<p>The arguments passed to host executable are:</p>
<ul class="simple">
<li><strong>fft1dkernel.xclbin</strong>: xclbin file name that will be found in build folder whose name starts with build_dir.hw. You should pass relative path to this file</li>
<li><strong>numOfBatches</strong>: This is number of batches of data that benchmark generates and passes to FFT kernel for processing</li>
<li><strong>benchamrk_results_file_name</strong>: This is the output csv file that will contain the benchmark results.</li>
</ul>
<p><strong>If you have built 2D FFT kernel floating or fixed point</strong> use the following command to launch the benchmark:</p>
<p><code class="docutils literal notranslate"><span class="pre">./host</span> <span class="pre">fft2dkernel.xclbin</span> <span class="pre">numOfBatches</span> <span class="pre">benchamrk_results_file_name.csv</span></code></p>
<p>The arguments passed to host executable are:</p>
<ul class="simple">
<li><strong>fft2dkernel.xclbin</strong>: xclbin file name that will be found in build folder whose name starts with build_dir.hw. You should pass relative path to this file</li>
<li><strong>numOfBatches</strong>: This is number of batches of data that benchmark generates and passes to FFT kernel for processing</li>
<li><strong>benchamrk_results_file_name</strong>: This is the output csv file that will contain the benchmark results.</li>
</ul>
<p>NOTE: The makefile provided with the benchmark also supports software emulation and hardware emulation runs which can be be launched as follows:</p>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">check</span> <span class="pre">TARGET=sw_emu</span> <span class="pre">DEVICE=../../xilinx_u250_xdma_201830_2.xpfm</span> <span class="pre">NUM_OF_BATCHES=numBatches</span> <span class="pre">PERF_LOGFILE=perf.csv</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">check</span> <span class="pre">TARGET=sw_emu</span> <span class="pre">DEVICE=../../xilinx_u250_xdma_201830_2.xpfm</span> <span class="pre">NUM_OF_BATCHES=numBatches</span> <span class="pre">PERF_LOGFILE=perf.csv</span></code></p>
<p><strong>NOTE: The performance log file reported benchmark results are not correct in software or hardware emulation modes.</strong></p>
</div>
<div class="section" id="benchmark-results-log-file">
<h4>Benchmark Results Log File<a class="headerlink" href="#benchmark-results-log-file" title="Permalink to this headline">¶</a></h4>
<p>The benchmark result log file provides number of different measurements which include:</p>
<ul class="simple">
<li>Kernel only execution time</li>
<li>End to End execution time which includes host to device and device to host data movement time</li>
<li>Data copy time between host and device</li>
<li>Bandwidth utilization between host and the device and vice/versa</li>
<li>Performance in terms of GFLOPs kernel only and the end to end</li>
</ul>
</div>
</div>
<div class="section" id="detailed-instructions-for-running-the-benchmarks-on-nimbix">
<h3>Detailed Instructions for Running The Benchmarks on Nimbix<a class="headerlink" href="#detailed-instructions-for-running-the-benchmarks-on-nimbix" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Clone git repo: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/Xilinx/Vitis_Libraries.git</span></code></li>
<li>Navigate to any benchmark in benchmarks directory in <strong>repo_path/dsp/L2/benchmarks/FPGA/</strong> i.e. <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">repo_path/dsp/L2/benchmark/FPGA/1dFloat</span></code></li>
<li>Source the scripts for setting up the Xilinx XRT and Vitis paths as per your local setup on <a class="reference external" href="https://www.nimbix.net/">Nimbix</a> these scripts are sourced automatically while launching the terminal.</li>
<li>Build host executable: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">host</span></code></li>
<li>Build xclbin for FPGA: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">build</span> <span class="pre">TARGET=hw</span> <span class="pre">DEVICE=../../../xilinx_u250_xdma_201830_2.xpfm</span></code></li>
<li>Launching benchmark : <code class="docutils literal notranslate"><span class="pre">./host</span> <span class="pre">path_to_xclbin</span> <span class="pre">numOfBatches</span> <span class="pre">perf_result_file_name.csv</span></code></li>
</ol>
</div>
<div class="section" id="benchmarking-results">
<h3>Benchmarking Results<a class="headerlink" href="#benchmarking-results" title="Permalink to this headline">¶</a></h3>
<p>Next few sections report the benchmark result for four different FFT types, 1D Fixed, 1D Float, 2D Fix and 2D Float.</p>
<div class="section" id="d-floating-point-fp32-fft-benchmark-results">
<h4>1D Floating Point(FP32) FFT Benchmark Results<a class="headerlink" href="#d-floating-point-fp32-fft-benchmark-results" title="Permalink to this headline">¶</a></h4>
<p>Floating Point or single precision FFT is benchmarked for different number of batches sizes. The host machine configuration is given below in the table:</p>
<table border="1" class="docutils align-left" id="id7">
<caption><span class="caption-text">Host Machine Configuration</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">CPU Model</th>
<td>Intel Xeon E5-2640 &#64; 2.4GHZ</td>
</tr>
<tr class="row-even"><th class="stub">CPU Cores</th>
<td>16</td>
</tr>
<tr class="row-odd"><th class="stub">Host Memory</th>
<td>128 GBs</td>
</tr>
<tr class="row-even"><th class="stub">Cloud</th>
<td>Nimbix</td>
</tr>
<tr class="row-odd"><th class="stub">Instance Name</th>
<td>Xilinx SDAccel Development 2019.1</td>
</tr>
<tr class="row-even"><th class="stub">FPGA Acceleration Card</th>
<td>Alveo U250</td>
</tr>
</tbody>
</table>
<p>The performance results are reported in the following table which give performance in terms of FLOPs/execution time for different number of FFT points/sizes. The SSR factor is a low level FFT kernel parameters that tells how many samples kernel can process once they are on-chip. Changing this parameter redefines the kernel performance in terms of maximum frequency at which kernel can run and FPGA resources consumed. SSR factor is also the radix of FFT algorithm used for implementation.</p>
<table border="1" class="docutils align-left" id="id8">
<caption><span class="caption-text">1D Floating Point FFT Benchmark Results</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">FFT Size/Points</th>
<th class="head">SSR</th>
<th class="head">No. Of Batches</th>
<th class="head">Execution Time(mS)</th>
<th class="head">Performance in GFLOPs</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>256</td>
<td>8</td>
<td>1</td>
<td>0.47</td>
<td>0.02</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>8</td>
<td>10</td>
<td>0.4</td>
<td>0.26</td>
</tr>
<tr class="row-even"><td>256</td>
<td>8</td>
<td>100</td>
<td>0.43</td>
<td>2.57</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>8</td>
<td>1000</td>
<td>1.16</td>
<td>8.89</td>
</tr>
<tr class="row-even"><td>1024</td>
<td>8</td>
<td>1</td>
<td>0.43</td>
<td>0.12</td>
</tr>
<tr class="row-odd"><td>1024</td>
<td>8</td>
<td>10</td>
<td>0.37</td>
<td>1.4</td>
</tr>
<tr class="row-even"><td>1024</td>
<td>8</td>
<td>100</td>
<td>0.61</td>
<td>8.49</td>
</tr>
<tr class="row-odd"><td>1024</td>
<td>8</td>
<td>1000</td>
<td>3.29</td>
<td>16.11</td>
</tr>
</tbody>
</table>
<p><strong>NOTE: The execution time measurements include data movement times between host and device</strong></p>
</div>
<div class="section" id="d-fixed-point-27-bits-fft-benchmark-results">
<h4>1D Fixed Point(27-bits) FFT Benchmark Results<a class="headerlink" href="#d-fixed-point-27-bits-fft-benchmark-results" title="Permalink to this headline">¶</a></h4>
<p>Fixed point 27-bit FFT is benchmarked for different number of batches sizes. The host machine configuration is given below in the table:</p>
<table border="1" class="docutils align-left" id="id9">
<caption><span class="caption-text">Host Machine Configuration</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">CPU Model</th>
<td>Intel Xeon E5-2640 &#64; 2.4GHZ</td>
</tr>
<tr class="row-even"><th class="stub">CPU Cores</th>
<td>16</td>
</tr>
<tr class="row-odd"><th class="stub">Host Memory</th>
<td>128 GBs</td>
</tr>
<tr class="row-even"><th class="stub">Cloud</th>
<td>Nimbix</td>
</tr>
<tr class="row-odd"><th class="stub">Instance Name</th>
<td>Xilinx SDAccel Development 2019.1</td>
</tr>
<tr class="row-even"><th class="stub">FPGA Acceleration Card</th>
<td>Alveo U250</td>
</tr>
</tbody>
</table>
<p>The fixed point data-path configuration for FFT is given below in the table.</p>
<table border="1" class="colwidths-auto docutils align-left" id="id10">
<caption><span class="caption-text">Fixed Point Data-path configuration</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<tbody valign="top">
<tr class="row-odd"><td>Input Width</td>
<td>27 Bits</td>
</tr>
<tr class="row-even"><td>Twiddle Factor Width</td>
<td>18 Bits</td>
</tr>
<tr class="row-odd"><td>Scaling Mode</td>
<td>SSR_FFT_GROW_TO_MAX_WIDTH :int part grows and saturate at 27 bits</td>
</tr>
</tbody>
</table>
<p>The performance results are reported in the following table which give performance in terms of FLOPs/execution time for different number of FFT points/sizes. The SSR factor reported in the table is a low level FFT kernel parameters that tells how many samples kernel can process once they are on-chip. Changing this parameter redefines the kernel performance in terms of maximum frequency at which kernel can run and FPGA resources consumed. SSR factor is also the radix of FFT algorithm used for implementation.</p>
<table border="1" class="docutils align-left" id="id11">
<caption><span class="caption-text">1D Fixed Point 27 Bits FFT Benchmark Results</span><a class="headerlink" href="#id11" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">FFT Size/Points</th>
<th class="head">SSR</th>
<th class="head">No. Of Batches</th>
<th class="head">Execution Time(mS)</th>
<th class="head">Performance in GFLOPs</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>256</td>
<td>8</td>
<td>1</td>
<td>0.47</td>
<td>0.02</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>8</td>
<td>10</td>
<td>0.41</td>
<td>0.25</td>
</tr>
<tr class="row-even"><td>256</td>
<td>8</td>
<td>100</td>
<td>0.46</td>
<td>2.27</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>8</td>
<td>1000</td>
<td>0.98</td>
<td>10.79</td>
</tr>
<tr class="row-even"><td>1024</td>
<td>8</td>
<td>1</td>
<td>0.52</td>
<td>0.1</td>
</tr>
<tr class="row-odd"><td>1024</td>
<td>8</td>
<td>10</td>
<td>0.47</td>
<td>1.08</td>
</tr>
<tr class="row-even"><td>1024</td>
<td>8</td>
<td>100</td>
<td>0.62</td>
<td>8.36</td>
</tr>
<tr class="row-odd"><td>1024</td>
<td>8</td>
<td>1000</td>
<td>2.85</td>
<td>18.23</td>
</tr>
<tr class="row-even"><td>4096</td>
<td>8</td>
<td>1</td>
<td>0.44</td>
<td>0.56</td>
</tr>
<tr class="row-odd"><td>4096</td>
<td>8</td>
<td>10</td>
<td>0.46</td>
<td>5.44</td>
</tr>
<tr class="row-even"><td>4096</td>
<td>8</td>
<td>100</td>
<td>1.57</td>
<td>15.85</td>
</tr>
<tr class="row-odd"><td>4096</td>
<td>8</td>
<td>1000</td>
<td>11.18</td>
<td>22.75</td>
</tr>
</tbody>
</table>
<p><strong>NOTE: The execution time measurements include data movement times between host and device</strong></p>
</div>
<div class="section" id="id1">
<h4>2D Floating Point(FP32) FFT Benchmark Results<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Floating Point or single precision 2D FFT is benchmarked for different number of batches sizes. The host machine configuration is given below in the table:</p>
<table border="1" class="docutils align-left" id="id12">
<caption><span class="caption-text">Host Machine Configuration</span><a class="headerlink" href="#id12" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">CPU Model</th>
<td>Intel Xeon E5-2640 &#64; 2.4GHZ</td>
</tr>
<tr class="row-even"><th class="stub">CPU Cores</th>
<td>16</td>
</tr>
<tr class="row-odd"><th class="stub">Host Memory</th>
<td>128 GBs</td>
</tr>
<tr class="row-even"><th class="stub">Cloud</th>
<td>Nimbix</td>
</tr>
<tr class="row-odd"><th class="stub">Instance Name</th>
<td>Xilinx SDAccel Development 2019.1</td>
</tr>
<tr class="row-even"><th class="stub">FPGA Acceleration Card</th>
<td>Alveo U250</td>
</tr>
</tbody>
</table>
<p>The performance results are reported in the following table which give performance in terms of FLOPs/execution time for different number of FFT points/sizes. 2D FFT deploys multiple 1-D FFT kernel running concurrently to process rows and columns of data. The SSR factor is a low level 1D FFT kernel parameters that tells how many samples kernel can process once they are on-chip. Changing this parameter redefines the kernel performance in terms of maximum frequency at which kernel can run and FPGA resources consumed. SSR factor is also the radix of 1D FFT algorithm used for implementation.</p>
<table border="1" class="docutils align-left" id="id13">
<caption><span class="caption-text">2D Floating Point FFT Benchmark Results</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">FFT Size:Rows</th>
<th class="head">FFT Size:Cols</th>
<th class="head">SSR</th>
<th class="head">No. of 1D Kernels</th>
<th class="head">No. Of Batches</th>
<th class="head">Execution Time(mS)</th>
<th class="head">Performance in GFLOPs</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>16</td>
<td>16</td>
<td>8</td>
<td>2</td>
<td>1</td>
<td>0.46</td>
<td>0.02</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>16</td>
<td>8</td>
<td>2</td>
<td>10</td>
<td>0.38</td>
<td>0.28</td>
</tr>
<tr class="row-even"><td>16</td>
<td>16</td>
<td>8</td>
<td>2</td>
<td>100</td>
<td>0.47</td>
<td>2.32</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>16</td>
<td>8</td>
<td>2</td>
<td>1000</td>
<td>1.42</td>
<td>7.29</td>
</tr>
<tr class="row-even"><td>32</td>
<td>32</td>
<td>8</td>
<td>2</td>
<td>1</td>
<td>0.46</td>
<td>0.11</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>32</td>
<td>8</td>
<td>2</td>
<td>10</td>
<td>0.48</td>
<td>1.07</td>
</tr>
<tr class="row-even"><td>32</td>
<td>32</td>
<td>8</td>
<td>2</td>
<td>100</td>
<td>0.75</td>
<td>6.87</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>32</td>
<td>8</td>
<td>2</td>
<td>1000</td>
<td>3.96</td>
<td>13.27</td>
</tr>
<tr class="row-even"><td>64</td>
<td>64</td>
<td>8</td>
<td>2</td>
<td>1</td>
<td>0.50</td>
<td>0.50</td>
</tr>
<tr class="row-odd"><td>64</td>
<td>64</td>
<td>8</td>
<td>2</td>
<td>10</td>
<td>0.45</td>
<td>5.66</td>
</tr>
<tr class="row-even"><td>64</td>
<td>64</td>
<td>8</td>
<td>2</td>
<td>100</td>
<td>1.50</td>
<td>16.78</td>
</tr>
<tr class="row-odd"><td>64</td>
<td>64</td>
<td>8</td>
<td>2</td>
<td>1000</td>
<td>10.07</td>
<td>25.97</td>
</tr>
<tr class="row-even"><td>256</td>
<td>256</td>
<td>8</td>
<td>2</td>
<td>1</td>
<td>4.32</td>
<td>1.21</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>256</td>
<td>8</td>
<td>2</td>
<td>10</td>
<td>4.62</td>
<td>11.34</td>
</tr>
<tr class="row-even"><td>256</td>
<td>256</td>
<td>8</td>
<td>2</td>
<td>100</td>
<td>22.62</td>
<td>23.19</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>256</td>
<td>8</td>
<td>2</td>
<td>1000</td>
<td>286.48</td>
<td>18.31</td>
</tr>
</tbody>
</table>
<p><strong>NOTE: The execution time measurements include data movement times between host and device</strong></p>
</div>
<div class="section" id="id2">
<h4>2D Fixed Point(27 Bits) FFT Benchmark Results<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>Fixed point 27 bits 2D FFT is benchmarked for different number of batches sizes. The host machine configuration is given below in the table:</p>
<table border="1" class="docutils align-left" id="id14">
<caption><span class="caption-text">Host Machine Configuration</span><a class="headerlink" href="#id14" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">CPU Model</th>
<td>Intel Xeon E5-2640 &#64; 2.4GHZ</td>
</tr>
<tr class="row-even"><th class="stub">CPU Cores</th>
<td>16</td>
</tr>
<tr class="row-odd"><th class="stub">Host Memory</th>
<td>128 GBs</td>
</tr>
<tr class="row-even"><th class="stub">Cloud</th>
<td>Nimbix</td>
</tr>
<tr class="row-odd"><th class="stub">Instance Name</th>
<td>Xilinx SDAccel Development 2019.1</td>
</tr>
<tr class="row-even"><th class="stub">FPGA Acceleration Card</th>
<td>Alveo U250</td>
</tr>
</tbody>
</table>
<p>The fixed point data-path configuration for 1D FFT Kernels used for row and column processing are given in the table below:</p>
<table border="1" class="colwidths-auto docutils align-left" id="id15">
<caption><span class="caption-text">Fixed Point Data-path configuration</span><a class="headerlink" href="#id15" title="Permalink to this table">¶</a></caption>
<tbody valign="top">
<tr class="row-odd"><td>Input Width</td>
<td>27 Bits</td>
</tr>
<tr class="row-even"><td>Twiddle Factor Width</td>
<td>18 Bits</td>
</tr>
<tr class="row-odd"><td>Scaling Mode</td>
<td>SSR_FFT_GROW_TO_MAX_WIDTH :int part grows and saturate at 27 bits</td>
</tr>
</tbody>
</table>
<p>The performance results are reported in the following table which give performance in terms of FLOPs/execution time for different number of FFT points/sizes. 2D FFT deploys multiple 1-D FFT kernel running concurrently to process rows and columns of data. The SSR factor is a low level 1D FFT kernel parameters that tells how many samples kernel can process once they are on-chip. Changing this parameter redefines the kernel performance in terms of maximum frequency at which kernel can run and FPGA resources consumed. SSR factor is also the radix of 1D FFT algorithm used for implementation.</p>
<table border="1" class="docutils align-left" id="id16">
<caption><span class="caption-text">2D Fixed Point 27 Bits FFT Benchmark Results</span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">FFT Size:Rows</th>
<th class="head">FFT Size:Cols</th>
<th class="head">SSR</th>
<th class="head">No. of 1D Kernels</th>
<th class="head">No. Of Batches</th>
<th class="head">Execution Time(mS)</th>
<th class="head">Performance in GFLOPs</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>16</td>
<td>16</td>
<td>8</td>
<td>2</td>
<td>1</td>
<td>0.02</td>
<td>0.45</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>16</td>
<td>8</td>
<td>2</td>
<td>10</td>
<td>0.29</td>
<td>0.36</td>
</tr>
<tr class="row-even"><td>16</td>
<td>16</td>
<td>8</td>
<td>2</td>
<td>100</td>
<td>2.34</td>
<td>0.44</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>16</td>
<td>8</td>
<td>2</td>
<td>1000</td>
<td>7.52</td>
<td>1.37</td>
</tr>
<tr class="row-even"><td>32</td>
<td>32</td>
<td>8</td>
<td>2</td>
<td>1</td>
<td>0.11</td>
<td>0.46</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>32</td>
<td>8</td>
<td>2</td>
<td>10</td>
<td>1.24</td>
<td>0.42</td>
</tr>
<tr class="row-even"><td>32</td>
<td>32</td>
<td>8</td>
<td>2</td>
<td>100</td>
<td>7.1</td>
<td>0.73</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>32</td>
<td>8</td>
<td>2</td>
<td>1000</td>
<td>13.52</td>
<td>3.86</td>
</tr>
<tr class="row-even"><td>64</td>
<td>64</td>
<td>8</td>
<td>2</td>
<td>1</td>
<td>0.57</td>
<td>0.44</td>
</tr>
<tr class="row-odd"><td>64</td>
<td>64</td>
<td>8</td>
<td>2</td>
<td>10</td>
<td>5.13</td>
<td>0.48</td>
</tr>
<tr class="row-even"><td>64</td>
<td>64</td>
<td>8</td>
<td>2</td>
<td>100</td>
<td>16.07</td>
<td>1.55</td>
</tr>
<tr class="row-odd"><td>64</td>
<td>64</td>
<td>8</td>
<td>2</td>
<td>1000</td>
<td>22.37</td>
<td>11.48</td>
</tr>
<tr class="row-even"><td>128</td>
<td>128</td>
<td>8</td>
<td>2</td>
<td>1</td>
<td>1.11</td>
<td>1.03</td>
</tr>
<tr class="row-odd"><td>128</td>
<td>128</td>
<td>8</td>
<td>2</td>
<td>10</td>
<td>11.1</td>
<td>1.04</td>
</tr>
<tr class="row-even"><td>128</td>
<td>128</td>
<td>8</td>
<td>2</td>
<td>100</td>
<td>23.08</td>
<td>5.14</td>
</tr>
<tr class="row-odd"><td>128</td>
<td>128</td>
<td>8</td>
<td>2</td>
<td>1000</td>
<td>24.27</td>
<td>50.42</td>
</tr>
<tr class="row-even"><td>256</td>
<td>256</td>
<td>8</td>
<td>2</td>
<td>1</td>
<td>1.56</td>
<td>3.36</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>256</td>
<td>8</td>
<td>2</td>
<td>10</td>
<td>14.29</td>
<td>3.67</td>
</tr>
<tr class="row-even"><td>256</td>
<td>256</td>
<td>8</td>
<td>2</td>
<td>100</td>
<td>26.18</td>
<td>20.03</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>256</td>
<td>8</td>
<td>2</td>
<td>1000</td>
<td>19.12</td>
<td>274.16</td>
</tr>
</tbody>
</table>
<p><strong>NOTE: The execution time measurements include data movement times between host and device</strong></p>
</div>
</div>
<div class="section" id="benchmarking-measurement-process-and-performance-metrics">
<h3>Benchmarking Measurement Process and Performance Metrics<a class="headerlink" href="#benchmarking-measurement-process-and-performance-metrics" title="Permalink to this headline">¶</a></h3>
<p>All the measurements are taken from host side using high resolution software timers. Specifically <code class="docutils literal notranslate"><span class="pre">high_resolution_clock</span></code> class is used for taking and storing time samples. The class provides functionality and storage for high resolution time samples. The following code snippet shows how kernel execution time measurement is taken:</p>
<pre class="highlight literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp"></span>
<span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">time_point</span> <span class="n">texec_start</span><span class="p">;</span>
<span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">time_point</span> <span class="n">texec_end</span><span class="p">;</span>
<span class="n">OCL_CHECK</span><span class="p">(</span><span class="n">err</span><span class="p">,</span> <span class="n">cl</span><span class="o">::</span><span class="n">CommandQueue</span> <span class="n">q</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span> <span class="n">CL_QUEUE_PROFILING_ENABLE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">err</span><span class="p">));</span>

<span class="n">texec_start</span> <span class="o">=</span> <span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="n">OCL_CHECK</span><span class="p">(</span><span class="n">err</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">enqueueMigrateMemObjects</span><span class="p">({</span><span class="n">buffer_in1</span><span class="p">},</span> <span class="mi">0</span> <span class="cm">/* 0 means from host*/</span><span class="p">));</span>
<span class="n">OCL_CHECK</span><span class="p">(</span><span class="n">err</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">enqueueTask</span><span class="p">(</span><span class="n">krnl_fft2d</span><span class="p">));</span>

<span class="n">OCL_CHECK</span><span class="p">(</span><span class="n">err</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">enqueueMigrateMemObjects</span><span class="p">({</span><span class="n">buffer_in2</span><span class="p">},</span> <span class="n">CL_MIGRATE_MEM_OBJECT_HOST</span><span class="p">));</span>
<span class="n">OCL_CHECK</span><span class="p">(</span><span class="n">err</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">finish</span><span class="p">());</span>
<span class="n">texec_end</span> <span class="o">=</span> <span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">total_exec_span</span> <span class="o">=</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">(</span><span class="n">texec_end</span> <span class="o">-</span> <span class="n">texec_start</span><span class="p">);</span>
<span class="kt">double</span> <span class="n">total_exec_time</span> <span class="o">=</span> <span class="n">total_exec_span</span><span class="p">.</span><span class="n">count</span><span class="p">();</span>
</pre>
<p><code class="docutils literal notranslate"><span class="pre">high_resolution_clock::now</span></code> returns a time point that is stored after taking this sample input buffer, 2D FFT kernels and output buffers are queued. After queuing the kernel and memory object movements <code class="docutils literal notranslate"><span class="pre">q.finish()</span></code> is called to sync the completion operation and an other time point is sampled and stored. The difference of these two time points gives the execution time including data movement and the kernel computations. Following formulas are used for calculating the FLOPs for 1D and 2D FFTs with complex input and output.</p>
<table border="1" class="docutils align-left" id="id17">
<caption><span class="caption-text">FLOPS Calculation Formulas ( FFT Complex In:Complex Out)</span><a class="headerlink" href="#id17" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">FFT Type</th>
<th class="head">Size</th>
<th class="head">Formula</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1D</td>
<td>N</td>
<td>5*N*log2(N)</td>
</tr>
<tr class="row-odd"><td>2D</td>
<td>N*N</td>
<td>10*N*N*log2(N)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="manually-configuring-kernel-parameters">
<h2>Manually Configuring Kernel Parameters<a class="headerlink" href="#manually-configuring-kernel-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="d-fft-kernel-parameter-configurations">
<h3>1D FFT Kernel Parameter Configurations<a class="headerlink" href="#d-fft-kernel-parameter-configurations" title="Permalink to this headline">¶</a></h3>
<p>Kernel parameters can be configured for provided benchmarks to have different:</p>
<blockquote>
<div><ul class="simple">
<li>Size of FFT kernel</li>
<li>Fix point data path(only for fix point case)</li>
<li>Super Sample Rate (SSR) also the radix of FFT algorithm</li>
</ul>
</div></blockquote>
<p>The fixed point data_path is defined in the source file name <code class="docutils literal notranslate"><span class="pre">src/hls_ssr_fft_params.hpp</span></code> , the data-path configuration are controlled by the struct called ‘’ssr_fft_params’‘. How these configuration effect the data path and how they should be set for particular FFT application is described in documentation of <a class="reference internal" href="../user_guide/L1.html#l1-fft-label"><span class="std std-ref">1-D Vitis FFT</span></a>.</p>
<p>The Size of FFT Kernel can be changed by changing the compile time constant in source file called <code class="docutils literal notranslate"><span class="pre">src/fft_size.hpp</span></code> namely <code class="docutils literal notranslate"><span class="pre">SSR_FFT_L</span></code>. The allowed size for 1D FFT are integer power of 2 within range 16:16384.</p>
<p>The Super Sample Rate or factor can be any number from the set {2,4,8,16}. The value of super sample rate is defined in source file <code class="docutils literal notranslate"><span class="pre">src/fft_size.hpp</span></code>  as <code class="docutils literal notranslate"><span class="pre">SSR_FFT_R</span></code>. Changing super sample rate required deeper understanding of benchmark and may have and adverse effect on performance. The best suited SSR factor is 8. The value of 8 is chosen to maximize the bandwidth utilization provided by the wide memory interface(512 Bits) between FPGA kernels and the device memory on Alveo FPGAS cards like <a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/alveo/u200.html">U200</a> <a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/alveo/u250.html">U250</a> and <a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/alveo/u280.html">U280</a>. If user understands the memory interface on target boards then he should be able to optimally choose SSR value.</p>
</div>
<div class="section" id="id3">
<h3>2D FFT Kernel Parameter Configurations<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Different parameters of 2D FFT kernels that can be configured include:</p>
<ul class="simple">
<li>The size of FFT</li>
<li>The super sample rate (radix of algorithm used carrying out 1D FFTs)</li>
<li>The data-path of the FFT kernel ( for fix point case only)</li>
<li>Parameters of input fixed point type ( selection of integer part and fraction part part)</li>
</ul>
<p>2D FFT Kernel is composed of multiple 1D FFT kernels and different other blocks which perform data ordering transformation. The choices made for parameters of 2D FFT will define how many kernel of 1D FFT type to use how to interconnect them for creating 2D transform.
For any benchmark for 2D FFT, the size of the 1D kernel is defined in source file named <code class="docutils literal notranslate"><span class="pre">src/fft_size.hpp</span></code> as <code class="docutils literal notranslate"><span class="pre">SSR_FFT_L</span></code> and the super sample rate factor is defined as <code class="docutils literal notranslate"><span class="pre">SSR_FFT_R</span></code> in the same file. Given the SSR_FFT_L is defined as some value <code class="docutils literal notranslate"><span class="pre">M</span></code> the 2D FFT kernel size of will be <code class="docutils literal notranslate"><span class="pre">M</span> <span class="pre">x</span> <span class="pre">M</span></code>. Hence it will process a matrix or image of size <code class="docutils literal notranslate"><span class="pre">M</span> <span class="pre">x</span> <span class="pre">M</span></code>.</p>
<p>The input fixed point type is defined in the file called <code class="docutils literal notranslate"><span class="pre">src/dtypes_inner.hpp</span></code> as <code class="docutils literal notranslate"><span class="pre">ap_fixed</span></code> user can change this type as needed. The values larger then 27 bits may have adverse effect on resource consumption on FPGA.
The super sample rate can be changed the best suitable values is 8 but lower values are also allowed. In the case of 2D FFT the architecture is such that if a value lower than 8 is chosen more number of 1D kernel will be used to maximize the bandwidth utilization of device DDR memory on host. In the case of using lower value of SSR many increase the clock frequency at which kernel can run.</p>
<p>The fixed point parameter are define in source file named <code class="docutils literal notranslate"><span class="pre">src/hls_ssr_fft_params.hpp</span></code> by two different structures namely <code class="docutils literal notranslate"><span class="pre">FFTParams</span></code> and <code class="docutils literal notranslate"><span class="pre">FFTParams2</span></code> one structure defined the parameters for 1D FFT kernel used along the rows of 2D FFT and other defines the parameters for 1D kernel used along the columns. The configuration can be done as described in the previous section and further detailed information can be found in documentation for <a class="reference internal" href="../user_guide/L1.html#l1-fft-label"><span class="std std-ref">1-D Vitis FFT</span></a> and <a class="reference internal" href="../user_guide/L1_2dfft.html#l1-2dfft-label"><span class="std std-ref">2-D Vitis FFT</span></a></p>
</div>
</div>
<div class="section" id="fft-benchmarking-on-gpu">
<h2>FFT Benchmarking on GPU<a class="headerlink" href="#fft-benchmarking-on-gpu" title="Permalink to this headline">¶</a></h2>
<p>To compare the performance of Vitis FFT L2 Kernels with GPU performance we have benchmarked the performance of FFT implementation provided by Nvidia as part of <a class="reference external" href="https://developer.nvidia.com/cuda-10.0-download-archive">CUDA V10</a>. The library is called <a class="reference external" href="https://developer.nvidia.com/cufft">cuFFT</a>. We have used <a class="reference external" href="https://cloud.google.com/">Google Cloud</a> which houses a Tesla V100 GPU. The GPU benchmark that we have used is also provided as part of the repo. The following sections describe how to run this benchmark and measure performance.</p>
</div>
<div class="section" id="building-and-running-the-gpu-benchmark">
<h2>Building and Running the GPU Benchmark<a class="headerlink" href="#building-and-running-the-gpu-benchmark" title="Permalink to this headline">¶</a></h2>
<p>The benchmark is provided as part of repo to run the benchmark follow the steps described below. Before this you need to make sure <a class="reference external" href="https://developer.nvidia.com/cuda-10.0-download-archive">CUDA V10</a> is installed and available GPU is ready to use with runtime and libraries as needed.
The host machine used for benchmark had the following configurations</p>
<table border="1" class="docutils align-left" id="id18">
<caption><span class="caption-text">Host Machine Configuration</span><a class="headerlink" href="#id18" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><th class="stub">CPU Model</th>
<td>Intel Xeon &#64; 2.0 GHZ</td>
</tr>
<tr class="row-even"><th class="stub">CPU Cores</th>
<td>8</td>
</tr>
<tr class="row-odd"><th class="stub">Host Memory</th>
<td>32 GBs</td>
</tr>
<tr class="row-even"><th class="stub">Cloud</th>
<td>Google Cloud Platform</td>
</tr>
<tr class="row-odd"><th class="stub">Instance Name</th>
<td>n1-standard-8</td>
</tr>
<tr class="row-even"><th class="stub">GPU</th>
<td>Nvdia Tesla V100</td>
</tr>
</tbody>
</table>
<div class="section" id="d-cufft-benchmark">
<h3>1D cuFFT Benchmark<a class="headerlink" href="#d-cufft-benchmark" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Clone Xilinx Vitis Libraries : <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/Xilinx/Vitis_Libraries.git</span></code></li>
<li>Navigate to GPU benchmarks   : <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">REPO_PATH/dsp/L2/benchmarks/GPU/</span></code></li>
<li>For 1D FFT Navigate to folder called 1dFFT <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">1dFFT</span></code></li>
<li>Build host executable : <code class="docutils literal notranslate"><span class="pre">make</span></code></li>
<li>Launch host executable to run benchmarking: <code class="docutils literal notranslate"><span class="pre">./1dFFT</span></code></li>
</ol>
<p>After the host executable finished the benchmarking process it will create a 1dFFT_benchmark_results.csv data file that will contain benchmark results. The benchmark results will include:</p>
<ul class="simple">
<li>No. of Batches for given test</li>
<li>Execution time for given test</li>
<li>The GLFOPS calculated</li>
</ul>
</div>
<div class="section" id="d-cufft-benchmark-options">
<h3>1D cuFFT Benchmark Options<a class="headerlink" href="#d-cufft-benchmark-options" title="Permalink to this headline">¶</a></h3>
<p>Host executable provides different options while launching benchmark. These options can be used to control what different range of FFTs are benchmarked and also it has options to specify which range of batch sizes to benchmark. The user can also choose if the linear batch size range is used or logarithmic range with options to control the step size. Following example will explain the usage of benchmarking while launching the executable.</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">./1dFFT</span></code><ul>
<li>Batch Size range will be <strong>logarithmic</strong>, it will run the benchmark with fixed FFT size range, step size and batch sizes.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">./1dFFT</span> <span class="pre">linear</span></code><ul>
<li>Batch size range will be <strong>linear</strong>, it will run the benchmark with fixed FFT size range, step size and batch sizes.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">./1dFFT</span> <span class="pre">max_fft_size</span> <span class="pre">max_batch_size</span></code><ul>
<li>Batch size range will be <strong>logarithmic</strong>, it will run the benchmark with fixed starting FFT size and up to <strong>max_fft_size</strong>, and batch sizes up to <strong>max_batch_size</strong>.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">./1dFFT</span> <span class="pre">linear</span> <span class="pre">max_fft_size</span> <span class="pre">max_batch_size</span></code><ul>
<li>Batch size range will be <strong>linear</strong>, it will run the benchmark with fixed starting FFT size up to <strong>max_fft_size</strong>, and batch sizes up to <strong>max_batch_size</strong>.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">./1dFFT</span> <span class="pre">starting_fft_size</span> <span class="pre">max_fft_size</span> <span class="pre">starting_batch_size</span> <span class="pre">max_batch_size</span></code><ul>
<li>Batch size range will be <strong>logarithmic</strong>, it will run the benchmark with starting FFT size <strong>starting_fft_size</strong> and maximum size up to <strong>max_fft_size</strong>, with starting batch size <strong>starting_batch_size</strong> and maximum batch size up to <strong>max_batch_size</strong></li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">./1dFFT</span> <span class="pre">linear</span> <span class="pre">starting_fft_size</span> <span class="pre">max_fft_size</span> <span class="pre">starting_batch_size</span> <span class="pre">max_batch_size</span></code><ul>
<li>Batch size range will be <strong>linear</strong>, it will run the benchmark with starting FFT size <strong>starting_fft_size</strong> and maximum size up to <strong>max_fft_size</strong>, with starting batch size <strong>starting_batch_size</strong> and maximum batch size up to <strong>max_batch_size</strong></li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">./1dFFT</span> <span class="pre">starting_fft_size</span> <span class="pre">max_fft_size</span> <span class="pre">fft_size_step</span> <span class="pre">starting_batch_size</span> <span class="pre">max_batch_size</span> <span class="pre">batch_size_step</span></code><ul>
<li>Batch size range will be <strong>logarithmic</strong>, it will run the benchmark with starting FFT size <strong>starting_fft_size</strong> and maximum size up to <strong>max_fft_size</strong> the step on FFT size with be <strong>fft_size_step</strong>, with starting batch size <strong>starting_batch_size</strong> and maximum batch size up to <strong>max_batch_size</strong> and with step on FFT batch size <strong>batch_size_step</strong></li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">./1dFFT</span> <span class="pre">linear</span> <span class="pre">starting_fft_size</span> <span class="pre">max_fft_size</span> <span class="pre">fft_size_step</span> <span class="pre">starting_batch_size</span> <span class="pre">max_batch_size</span> <span class="pre">batch_size_step</span></code><ul>
<li>Batch size range will be <strong>linear</strong>, it will run the benchmark with starting FFT size <strong>starting_fft_size</strong> and maximum size up to <strong>max_fft_size</strong> the step on FFT size with be <strong>fft_size_step</strong>, with starting batch size <strong>starting_batch_size</strong> and maximum batch size up to <strong>max_batch_size</strong> and with step on FFT batch size <strong>batch_size_step</strong></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="d-cufft-benchmark-results">
<h3>1D cuFFT Benchmark Results<a class="headerlink" href="#d-cufft-benchmark-results" title="Permalink to this headline">¶</a></h3>
<p>Following table gives performance resutls for 1D FFT benchmarked using cuFFT library for floating point single precision numbers for various lengths and batch sizes.</p>
<table border="1" class="docutils align-left" id="id19">
<caption><span class="caption-text">2D cuFFT Benchmark Results for Tesla V100 on Google Cloud</span><a class="headerlink" href="#id19" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">FFT Size/Points</th>
<th class="head">No. of Batches</th>
<th class="head">Execution Time (mS)</th>
<th class="head">Performance in GFLOPs</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>256</td>
<td>1</td>
<td>0.07</td>
<td>0.16</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>10</td>
<td>0.05</td>
<td>1.96</td>
</tr>
<tr class="row-even"><td>256</td>
<td>100</td>
<td>0.17</td>
<td>5.95</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>1000</td>
<td>1.13</td>
<td>9.04</td>
</tr>
<tr class="row-even"><td>1024</td>
<td>1</td>
<td>0.06</td>
<td>0.93</td>
</tr>
<tr class="row-odd"><td>1024</td>
<td>10</td>
<td>0.09</td>
<td>5.91</td>
</tr>
<tr class="row-even"><td>1024</td>
<td>100</td>
<td>0.47</td>
<td>10.94</td>
</tr>
<tr class="row-odd"><td>1024</td>
<td>1000</td>
<td>3.65</td>
<td>14.03</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id4">
<h3>2D cuFFT Benchmark<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Clone Xilinx Vitis Libraries : <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/Xilinx/Vitis_Libraries.git</span></code></li>
<li>Navigate to GPU benchmarks   : <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">REPO_PATH/dsp/L2/benchmarks/GPU/</span></code></li>
<li>For 2D FFT Navigate to folder called 2dFFT <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">2dFFT</span></code></li>
<li>Build host executable : <code class="docutils literal notranslate"><span class="pre">make</span></code></li>
<li>Launch host executable to run benchmarking: <code class="docutils literal notranslate"><span class="pre">./2dFFT</span></code></li>
</ol>
<p>After the host executable finished the benchmarking process it will create a 2dFFT_benchmark_results.csv data file that will contain benchmark results. The benchmark results will include:</p>
<ul class="simple">
<li>No. of Batches for given test</li>
<li>Execution time for given test</li>
<li>The GLFOPS calculated</li>
</ul>
</div>
<div class="section" id="id5">
<h3>2D cuFFT Benchmark Options<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Host executable provides different options while launching benchmark. These options can be used to control what different range of FFTs are benchmarked and also it has options to specify which range of batch sizes to benchmark. The user can also choose if the linear batch size range is used or logarithmic range with options to control the step size. In all the example runs below, the size of 2D FFT is assumed to be square so only once dimension is specified as the size. So all the FFTs of shape NxN are benchmarked.
Following example will explain the usage of benchmarking.</p>
<ol class="arabic">
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">./2dFFT</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Batch Size range will be <strong>logarithmic</strong>, it will run the benchmark with fixed FFT size range, step size and batch sizes.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">./2dFFT</span> <span class="pre">linear</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Batch size range will be <strong>linear</strong>, it will run the benchmark with fixed FFT size range, step size and batch sizes.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">./2dFFT</span> <span class="pre">max_fft_size</span> <span class="pre">max_batch_size</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Batch size range will be <strong>logarithmic</strong>, it will run the benchmark with fixed starting FFT size and up to <strong>max_fft_size</strong>, and batch sizes up to <strong>max_batch_size</strong>.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">./2dFFT</span> <span class="pre">linear</span> <span class="pre">max_fft_size</span> <span class="pre">max_batch_size</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Batch size range will be <strong>linear</strong>, it will run the benchmark with fixed starting FFT size up to <strong>max_fft_size</strong>, and batch sizes up to <strong>max_batch_size</strong>.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">./2dFFT</span> <span class="pre">starting_fft_size</span> <span class="pre">max_fft_size</span> <span class="pre">starting_batch_size</span> <span class="pre">max_batch_size</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Batch size range will be <strong>logarithmic</strong>, it will run the benchmark with starting FFT size <strong>starting_fft_size</strong> and maximum size up to <strong>max_fft_size</strong>, with starting batch size <strong>starting_batch_size</strong> and maximum batch size up to <strong>max_batch_size</strong></li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">./2dFFT</span> <span class="pre">linear</span> <span class="pre">starting_fft_size</span> <span class="pre">max_fft_size</span> <span class="pre">starting_batch_size</span> <span class="pre">max_batch_size</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Batch size range will be <strong>linear</strong>, it will run the benchmark with starting FFT size <strong>starting_fft_size</strong> and maximum size up to <strong>max_fft_size</strong>, with starting batch size <strong>starting_batch_size</strong> and maximum batch size up to <strong>max_batch_size</strong></li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">./1dFFT</span> <span class="pre">starting_fft_size</span> <span class="pre">max_fft_size</span> <span class="pre">fft_size_step</span> <span class="pre">starting_batch_size</span> <span class="pre">max_batch_size</span> <span class="pre">batch_size_step</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Batch size range will be <strong>logarithmic</strong>, it will run the benchmark with starting FFT size <strong>starting_fft_size</strong> and maximum size up to <strong>max_fft_size</strong> the step on FFT size with be <strong>fft_size_step</strong>, with starting batch size <strong>starting_batch_size</strong> and maximum batch size up to <strong>max_batch_size</strong> and with step on FFT batch size <strong>batch_size_step</strong></li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">./1dFFT</span> <span class="pre">linear</span> <span class="pre">starting_fft_size</span> <span class="pre">max_fft_size</span> <span class="pre">fft_size_step</span> <span class="pre">starting_batch_size</span> <span class="pre">max_batch_size</span> <span class="pre">batch_size_step</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Batch size range will be <strong>linear</strong>, it will run the benchmark with starting FFT size <strong>starting_fft_size</strong> and maximum size up to <strong>max_fft_size</strong> the step on FFT size with be <strong>fft_size_step</strong>, with starting batch size <strong>starting_batch_size</strong> and maximum batch size up to <strong>max_batch_size</strong> and with step on FFT batch size <strong>batch_size_step</strong></li>
</ul>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="id6">
<h3>2D cuFFT Benchmark Results<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>Following table gives performance resutls for 2D FFT benchmarked using cuFFT library for floating point single precision numbers for various lengths and batch sizes.</p>
<table border="1" class="docutils align-left" id="id20">
<caption><span class="caption-text">2D cuFFT Benchmark Results for Tesla V100  in Google Cloud</span><a class="headerlink" href="#id20" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">FFT Size:Rows</th>
<th class="head">FFT Size:Cols</th>
<th class="head">No. of Batches</th>
<th class="head">Execution Time (mS)</th>
<th class="head">Performance in GFLOPs</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>16</td>
<td>16</td>
<td>1</td>
<td>0.10</td>
<td>0.11</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>16</td>
<td>10</td>
<td>0.07</td>
<td>1.41</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>16</td>
<td>16</td>
<td>100</td>
<td>0.19</td>
<td>5.49</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>16</td>
<td>1000</td>
<td>1.18</td>
<td>8.71</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>32</td>
<td>32</td>
<td>1</td>
<td>0.07</td>
<td>0.68</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>32</td>
<td>10</td>
<td>0.09</td>
<td>5.93</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>32</td>
<td>32</td>
<td>100</td>
<td>0.56</td>
<td>9.14</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>32</td>
<td>1000</td>
<td>8.39</td>
<td>6.10</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>64</td>
<td>64</td>
<td>1</td>
<td>0.09</td>
<td>2.85</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>64</td>
<td>64</td>
<td>10</td>
<td>0.25</td>
<td>9.95</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>64</td>
<td>64</td>
<td>100</td>
<td>1.71</td>
<td>14.39</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>64</td>
<td>64</td>
<td>1000</td>
<td>32.51</td>
<td>7.56</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>256</td>
<td>256</td>
<td>1</td>
<td>0.45</td>
<td>11.68</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>256</td>
<td>10</td>
<td>2.76</td>
<td>18.98</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>256</td>
<td>256</td>
<td>100</td>
<td>51.22</td>
<td>10.24</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>256</td>
<td>256</td>
<td>1000</td>
<td>512.11</td>
<td>10.24</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="gpu-benchmarking-measurement-process-and-performance-metrics">
<h3>GPU Benchmarking Measurement Process and Performance Metrics<a class="headerlink" href="#gpu-benchmarking-measurement-process-and-performance-metrics" title="Permalink to this headline">¶</a></h3>
<p>All the execution time measurements are taken from host side using high resolution software timers. Specifically <code class="docutils literal notranslate"><span class="pre">high_resolution_clock</span></code> class is used for taking and storing time samples. The class provides functionality and storage for high resolution time samples. The following code snippet shows how kernel execution time measurement is taken:</p>
<pre class="highlight literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp"></span>
<span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">time_point</span> <span class="n">t3</span><span class="p">;</span>
<span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">time_point</span> <span class="n">t4</span><span class="p">;</span>
<span class="n">t3</span> <span class="o">=</span> <span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="n">cudaMemcpy</span><span class="p">(</span><span class="n">d_inData</span><span class="p">,</span> <span class="n">h_inData</span><span class="p">,</span><span class="n">k_inputDataSizeBytes</span><span class="p">,</span> <span class="n">cudaMemcpyHostToDevice</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">cufftExecC2C</span><span class="p">(</span><span class="n">plan</span><span class="p">,</span> <span class="n">d_inData</span><span class="p">,</span> <span class="n">d_outData</span><span class="p">,</span> <span class="n">CUFFT_FORWARD</span><span class="p">)</span> <span class="o">!=</span> <span class="n">CUFFT_SUCCESS</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;CUFFT error: ExecC2C Forward failed&quot;</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">cudaMemcpy</span><span class="p">(</span><span class="n">h_outData</span><span class="p">,</span> <span class="n">d_outData</span><span class="p">,</span> <span class="n">k_inputDataSizeBytes</span><span class="p">,</span><span class="n">cudaMemcpyDeviceToHost</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="n">cudaDeviceSynchronize</span><span class="p">()</span> <span class="o">!=</span> <span class="n">cudaSuccess</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Cuda error: Failed to synchronize</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">t4</span> <span class="o">=</span> <span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">time_span2</span> <span class="o">=</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">t4</span><span class="o">-</span><span class="n">t3</span><span class="p">);</span>
<span class="kt">double</span> <span class="n">exec_time</span> <span class="o">=</span> <span class="n">time_span2</span><span class="p">.</span><span class="n">count</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="n">kernel_iterations</span> <span class="o">*</span> <span class="n">batch_size</span><span class="p">);</span>
</pre>
<p>The FLOPS calculation formulas used are the same as used for GPU performance metrics calculations.</p>
<table border="1" class="docutils align-left" id="id21">
<caption><span class="caption-text">FLOPS Calculation Formulas ( FFT Complex In:Complex Out)</span><a class="headerlink" href="#id21" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">FFT Type</th>
<th class="head">Size</th>
<th class="head">Formula</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1D</td>
<td>N</td>
<td>5*N*log2(N)</td>
</tr>
<tr class="row-odd"><td>2D</td>
<td>N*N</td>
<td>10*N*N*log2(N)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>
	  
	  
	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">

    </p>
  </div>	  
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
  

  
  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2019, Xilinx Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}
			
			underscoreSetup();
		</script>
	</body>
</html>