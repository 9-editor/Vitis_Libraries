.. index:: pair: class; xf::fintech::internal::StreamWrapper
.. _doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper:
.. _cid-xf::fintech::internal::streamwrapper:

template class xf::fintech::internal::StreamWrapper
===================================================

.. toctree::
	:hidden:

.. code-block:: cpp
	:class: overview-code-block

	#include <fd_solver.hpp>


Overview
~~~~~~~~

Utility class to encapsulate the multiplier elements. :ref:`More...<details-doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper>`

.. _doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper_1ade382e41f58413c95f1f74917929f990:
.. _cid-xf::fintech::internal::streamwrapper::widedatatype:
.. _doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper_1a25c0c31159ea7289ea6c7540adecde80:
.. _cid-xf::fintech::internal::streamwrapper::widestreamtype:
.. ref-code-block:: cpp
	:class: overview-code-block

	template <
	    typename DT,
	    unsigned int MEM_WIDTH,
	    unsigned int INDEX_WIDTH,
	    unsigned int A_SIZE,
	    unsigned int M_SIZE,
	    unsigned int LOG2_M_SIZE,
	    unsigned int DIM2_SIZE1 = 3,
	    unsigned int DIM2_SIZE2 = 5
	    >
	class StreamWrapper

	// typedefs

	typedef xf::fintech::blas::WideType <DT, MEM_WIDTH> WideDataType
	typedef hls::stream <:ref:`WideDataType<doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper_1ade382e41f58413c95f1f74917929f990>`> WideStreamType


.. FunctionSection

Methods
~~~~~~~

.. _doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper_1a6ff546acd9d612b9ed44aa38d56ccb63:
.. _cid-xf::fintech::internal::streamwrapper::streamdimv3:

streamDimv3
-----------


Defined in <xf_fintech/fd_solver.hpp>
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


.. ref-code-block:: cpp
	:class: title-code-block

	void streamDimv3 (
	    DT A1 [M_SIZE][DIM2_SIZE1],
	    DT u [M_SIZE],
	    DT rhs1_tmp0 [M_SIZE],
	    :ref:`WideStreamType<doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper_1a25c0c31159ea7289ea6c7540adecde80>`& u_out
	    )

Computes multiplication of tridiagonal matrix by a vector.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - A1

        - M x 3 array holding lower/main/upper diagonals of A1 tridiagonal matrix

    *
        - u

        - Vector to be multiplied

    *
        - rhs1_tmp0

        - Multiplication result

    *
        - u_out

        - Stream form of U to pass to pentadiagonal multiplier

.. _doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper_1a7ee26b77f75af2dee7470beccd23e9cc:
.. _cid-xf::fintech::internal::streamwrapper::streamdimv5:

streamDimv5
-----------


Defined in <xf_fintech/fd_solver.hpp>
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


.. ref-code-block:: cpp
	:class: title-code-block

	void streamDimv5 (
	    DT A2 [M_SIZE][DIM2_SIZE2],
	    :ref:`WideStreamType<doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper_1a25c0c31159ea7289ea6c7540adecde80>`& u_in,
	    unsigned int m1,
	    unsigned int m2,
	    DT rhs2_tmp0 [M_SIZE],
	    :ref:`WideStreamType<doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper_1a25c0c31159ea7289ea6c7540adecde80>`& u_out
	    )

Computes multiplication of pentadiagonal matrix by a vector.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - A2

        - M x 5 array holding lower/main/upper diagonals of A2 tridiagonal matrix

    *
        - u_in

        - Vector to be multiplied [stream format]

    *
        - m1

        - Size of array [0..m1-1] in S direction

    *
        - m2

        - Size of array [0..m2-1] in V direction

    *
        - rhs2_tmp0

        - Multiplication result

    *
        - u_out

        - Vector output [stream format]

.. _doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper_1aa432bfe3139593f2c1b43f86788d8845:
.. _cid-xf::fintech::internal::streamwrapper::streamsparsemultadd:

streamSparseMultAdd
-------------------


Defined in <xf_fintech/fd_solver.hpp>
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


.. ref-code-block:: cpp
	:class: title-code-block

	void streamSparseMultAdd (
	    DT A [A_SIZE],
	    unsigned int Ar [A_SIZE],
	    unsigned int Ac [A_SIZE],
	    :ref:`WideStreamType<doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper_1a25c0c31159ea7289ea6c7540adecde80>`& u_in,
	    DT b [M_SIZE],
	    unsigned int Annz,
	    unsigned int M,
	    DT y0 [M_SIZE]
	    )

Computes multiplication of sparse matrix by vector plus a constant.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - A

        - Sparse matrix value

    *
        - Ar

        - Sparse matrix row

    *
        - Ac

        - Sparse matrix column

    *
        - u_in

        - Vector to be multiplied [stream format]

    *
        - b

        - Vector to be added after sparse-mult stage

    *
        - Annz

        - Number of non-zeros in sparse matrix (how many elements of A/Ar/Ac are valid)

    *
        - M

        - Matrix M-size === (m1+1) x (m2+1)

    *
        - y0

        - Result of mult-add in flattened S-inner form

.. _doxid-classxf_1_1fintech_1_1internal_1_1_stream_wrapper_1a60a117a02b50d17176864f860c06cdd2:
.. _cid-xf::fintech::internal::streamwrapper::parallelblocks:

parallelBlocks
--------------


Defined in <xf_fintech/fd_solver.hpp>
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


.. ref-code-block:: cpp
	:class: title-code-block

	void parallelBlocks (
	    DT A [A_SIZE],
	    unsigned int Ar [A_SIZE],
	    unsigned int Ac [A_SIZE],
	    DT u [M_SIZE],
	    DT b [M_SIZE],
	    unsigned int Annz,
	    unsigned int M,
	    DT A1 [M_SIZE][DIM2_SIZE1],
	    DT A2 [M_SIZE][DIM2_SIZE2],
	    unsigned int m1,
	    unsigned int m2,
	    DT y0 [M_SIZE],
	    DT rhs1_tmp0 [M_SIZE],
	    DT rhs2_tmp0 [M_SIZE]
	    )

Wrapper function to combine multipliers into a dataflow region and allow parallelization.

