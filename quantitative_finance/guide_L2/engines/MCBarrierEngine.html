

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Internal Design of Barrier Option Pricing Engine &mdash; Vitis Quantitative Finance Library 1.0 pre-alpha documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/xilinx-favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Internal Design of Cliquet Option Pricing Engine" href="MCCliquetEngine.html" />
    <link rel="prev" title="Internal Design of Digital Option Pricing Engines" href="MCDigitalEngine.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Vitis Quantitative Finance Library
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Library Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#trademark-notice">Trademark Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rel.html">Release Note</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../models_and_methods.html">Pricing Models and Numerical Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide_L1/L1.html">L1 Module User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../L2.html">L2 Pricing Engine Kernel User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">Pricing Engine Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../kernel_design.html">Pricing Engine Kernel Design</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="MCEuropeanEngine.html">Internal Design of MCEuropeanEngine</a></li>
<li class="toctree-l3"><a class="reference internal" href="MCEuropeanHestonEngine.html">Internal Design of MCEuropeanHestonEngine</a></li>
<li class="toctree-l3"><a class="reference internal" href="MCAsianEngines.html">Internal Design of Asian Option Pricing Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="MCDigitalEngine.html">Internal Design of Digital Option Pricing Engines</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Internal Design of Barrier Option Pricing Engine</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="MCCliquetEngine.html">Internal Design of Cliquet Option Pricing Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="MCAmericanEngine.html">Internal Design of American Option Pricing Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="MCMultiAssetEuropeanHestonEngine.html">Internal Design of MCMultiAssetEuropeanHestonEngine</a></li>
<li class="toctree-l3"><a class="reference internal" href="MCHullWhiteCapFloorEngine.html">Internal Design of MCHullWhiteCapFloorEngine</a></li>
<li class="toctree-l3"><a class="reference internal" href="MCEuropeanHestonGreeksEngine.html">Internal Design of MCEuropeanHestonGreeksEngine</a></li>
<li class="toctree-l3"><a class="reference internal" href="CFBlackScholesMerton.html">Internal Design of Closed Form Black-Scholes-Merton</a></li>
<li class="toctree-l3"><a class="reference internal" href="CFHeston.html">Internal Design of Closed Form Heston</a></li>
<li class="toctree-l3"><a class="reference internal" href="M76.html">Internal Design of Closed Form Merton 76</a></li>
<li class="toctree-l3"><a class="reference internal" href="GarmanKohlhagen.html">Internal Design of Garman Kohlhagen</a></li>
<li class="toctree-l3"><a class="reference internal" href="Quanto.html">Internal Design of Quanto</a></li>
<li class="toctree-l3"><a class="reference internal" href="BTCRR.html">Internal Design of Cox-Ross-Rubinstein Binomial Tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="FDHullWhiteEngine.html">Internal Design of Finite-Difference Hull-White Bermudan Swaption Pricing Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="FDG2SwaptionEngine.html">Internal Design of Finite-Difference G2 Bermudan Swaption Pricing Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="TreeEngine.html">Internal Design of Tree Bermudan Swaption Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="CPICapFloorEngine.html">Internal Design of CPI CapFloor Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="InflationCapFloorEngine.html">Internal Design of Inflation CapFloor Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="ZCDiscountingBondEngine.html">Internal Design of Zero Coupon Bond Engine</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kernel_api.html">Pricing Engine Kernel APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel_benchmark.html">Pricing Engines Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_engines.html">Other Engine Kernel Design</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../guide_L3/L3.html">L3 Overlay User Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Benchmark Result</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../benchmark/benchmark.html">Quality and Performance</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Vitis Quantitative Finance Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../L2.html">L2 Pricing Engine Kernel User Guide</a> &raquo;</li>
        
          <li><a href="../kernel_design.html">Pricing Engine Kernel Design</a> &raquo;</li>
        
      <li>Internal Design of Barrier Option Pricing Engine</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/guide_L2/engines/MCBarrierEngine.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="internal-design-of-barrier-option-pricing-engine">
<h1>Internal Design of Barrier Option Pricing Engine<a class="headerlink" href="#internal-design-of-barrier-option-pricing-engine" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This engine uses Monte Carlo Simulation method to estimate the payoff of barrier option. Here, we assume the process of asset pricing applies to Black-Scholes process.</p>
<p>Barrier option is a kind of option whose payoff depends on whether the option is effective at the maturity time. Only when the option is effective, the holder of the option has the right, but not the obligation, to buy/sell the underlying asset at the strike price. If the option is effective, the payoff of it will be calculated as the European Option.</p>
<p>There are four barrier option types, including:</p>
<ul class="simple">
<li>‘UpIn’: The option becomes effective when the price of the underlying asset is greater than the barrier value.</li>
<li>‘UpOut’: The option becomes ineffective when the price of the underlying asset is greater than the barrier value.</li>
<li>‘DownIn’: The option becomes effective when the price of the underlying asset is less than the barrier value.</li>
<li>‘DownOut’: The option becomes ineffective when the price of the underlying asset is less than the barrier value.</li>
</ul>
<p>The rebate is a fixed value which is paid when the option is ineffective.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In our implementation, barrier option means continuous and single barrier option. That is to say, the barrier event could happen at any time during the lifetime of option.</p>
</div>
</div>
<div class="section" id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>We provide two kinds of pricing engines, MCBarrierEngine and MCBarrierNoBiasEngine to evaluate the barrier option.</p>
<p>MCBarrierEngine generates the result with bias because it only considers whether the asset price at each discrete time point hits the barrier level.</p>
<p>However, the asset price during each discrete time interval maybe go up and down to hit the barrier level, which causes the bias of result. MCBarrierNoBiasEngine is to approximate the price process during the interval by a Brownian bridge.
After simulating the asset price at each discrete time point, draw the maximum or minimum of the stock price on the interval using the known theoretical distribution of a Brownian Bridge, refer to <strong>‘’Going to Extremes: Correcting Simulation Bias in Exotic Option Valuation - D.R. Beaglehole, P.H. Dybvig and G. Zhou, Correcting for Simulation Bias in Monte Carlo methods to Value Exotic Opitons in Models Driven by Levy Process - Claudia Ribeiro and Nick Webber.’‘</strong></p>
<p>In the following, we will take up-and-out barrier option as an example to elaborate the two kinds of pricing engines.
Let <span class="math notranslate nohighlight">\(T\)</span> be the maturity time of option, the barrier level is <span class="math notranslate nohighlight">\(B\)</span>. The maturity time <span class="math notranslate nohighlight">\(T\)</span> is discretized by time steps <span class="math notranslate nohighlight">\(N\)</span>.
The rebate value is <span class="math notranslate nohighlight">\(R\)</span>. If a barrier option fails to exercise, the seller may pay a rebate to the buyer of the option. Knock-outs may pay a rebate when they are knocked out, and knock-ins may pay a rebate if they expire without ever knocking in.</p>
<div class="section" id="mcbarrierengine">
<h3>MCBarrierEngine<a class="headerlink" href="#mcbarrierengine" title="Permalink to this headline">¶</a></h3>
<p>MCBarrierEngine is similar to the MCEuropeanEngine except for the path pricer.</p>
<p>In this engine, the path pricer samples the asset price path at the discrete time intervals <span class="math notranslate nohighlight">\([t_j, t_j+1]\)</span>, <span class="math notranslate nohighlight">\(j=1, ..., N\)</span>. The barrier condition is tested
at each time step. When the barrier level is hit, the option becomes non-effective and the rebate is paid for the owner of option. The rebate is discounted to today for value of option.
If the barrier is never hit, the payoff of the option is calculated by value of asset at maturity time <span class="math notranslate nohighlight">\(T\)</span> and it is discounted to today for value of option.</p>
<p>The detailed procedure of Monte Carlo Simulation is as follows:</p>
<ul class="simple">
<li>For <span class="math notranslate nohighlight">\(i\)</span> = 1 to <span class="math notranslate nohighlight">\(M\)</span><ul>
<li>For <span class="math notranslate nohighlight">\(j\)</span> = 1 to <span class="math notranslate nohighlight">\(N\)</span><ul>
<li>generate a normal random number;</li>
<li>simulate the price of asset <span class="math notranslate nohighlight">\(S^i_j\)</span>;</li>
<li>calculate the payoff and discount it to today.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>if <span class="math notranslate nohighlight">\(S^i_j &gt; B\)</span>,</p>
<div class="math notranslate nohighlight">
\[P_i = R\exp (-rt_j)\]</div>
<p>or if <span class="math notranslate nohighlight">\(S^i_1, S^i_2, ..., S^i_N\)</span> never cross the barrier,</p>
<div class="math notranslate nohighlight">
\[P_i = max(S^i_N - K, 0)\exp (-rT).\]</div>
<p>So, the estimated value of option is the average of all the samples.</p>
<div class="math notranslate nohighlight">
\[c = \frac{1}{M}\sum_{i=1}^{M} P_i\]</div>
<p>The <span class="math notranslate nohighlight">\(c\)</span> is a biased estimate of the barrier option value, because the sample path may have exceeded the barrier level, knocking out the option, during the time interval.</p>
</div>
<div class="section" id="mcbarriernobiasengine">
<h3>MCBarrierNoBiasEngine<a class="headerlink" href="#mcbarriernobiasengine" title="Permalink to this headline">¶</a></h3>
<p>For barrier option, the payoff is decided by the maximum or minimum value of the underlying asset during the lifetime of option.
The maximum of the price process on a discrete set of times is always lower than the maximum for all times, so the MCBarrierEngine always underestimate the option price.</p>
<p>Here, we use the Brownian bridge approach to eliminate the bias. For the discrete time interval <span class="math notranslate nohighlight">\([t_j, t_j+1]\)</span>, when <span class="math notranslate nohighlight">\(S(t_j)\)</span> and <span class="math notranslate nohighlight">\(S(t_{j+1})\)</span> is fixed,
the process of <span class="math notranslate nohighlight">\(S(t), t\in[t_j,t_j+1]\)</span> is a Brownian bridge. We will consider <span class="math notranslate nohighlight">\(Pr\)</span> is the probability of the maximum asset price during time interval <span class="math notranslate nohighlight">\([t_i, t_i+1]\)</span> less than barrier level.
Then, we have:</p>
<div class="math notranslate nohighlight">
\[Pr[max_{t\in{t_j, t_j+1}}(S_t) &lt;= B|S(t_j), S(t_{j+1})] = 1 - \exp (-2\frac {(\underline{B}-R_j)(\underline{B}-R_{j+1})} {\sigma^2 \Delta t})\]</div>
<p>where <span class="math notranslate nohighlight">\(\underline{B} = \ln \frac {B}{S(t_j)}, R_j = \ln \frac {S(t_{j+1})}{S(t_j)}\)</span>.</p>
<p>Let <span class="math notranslate nohighlight">\(u\)</span> ~ [0,1] be a draw of a standard uniform variate, then</p>
<div class="math notranslate nohighlight">
\[M = \frac {R_{j+1} + R_j - \sqrt {(R_{j+1} - R_j)^2 - 2\sigma^2 \Delta t\log u}} {2}\]</div>
<p>is a draw from the distribution of the maximum of <span class="math notranslate nohighlight">\(\ln \frac{S(t)}{S(t_j)}\)</span>. So <span class="math notranslate nohighlight">\(S(t_j)\exp (M)\)</span> is a draw from maximum of <span class="math notranslate nohighlight">\(S(t)\)</span>.</p>
<p>The detailed procedure of Monte Carlo Simulation is as follows:</p>
<ul class="simple">
<li>For <span class="math notranslate nohighlight">\(i\)</span> = 1 to <span class="math notranslate nohighlight">\(M\)</span><ul>
<li>For <span class="math notranslate nohighlight">\(j\)</span> = 1 to <span class="math notranslate nohighlight">\(N\)</span><ul>
<li>generate a normal random number and uniform random number <span class="math notranslate nohighlight">\(u\)</span>;</li>
<li>simulate the price of asset <span class="math notranslate nohighlight">\(S^i_j\)</span>;</li>
<li>simulate the maximum price of asset <span class="math notranslate nohighlight">\(M\)</span> during time interval <span class="math notranslate nohighlight">\([t_{j-1}, t_j]\)</span>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="math notranslate nohighlight">
\[x = \ln \frac {S^i_j}{S^i_{j-1}}\]</div>
<div class="math notranslate nohighlight">
\[y = \frac {x - \sqrt {(x^2 - 2\sigma^2 \Delta t\log u)}} {2}\]</div>
<div class="math notranslate nohighlight">
\[M = S^i_j\exp (y)\]</div>
<p>The calculation of payoff is similar to the step 3 in MCBarrierEngine except that the <span class="math notranslate nohighlight">\(S^i_j\)</span> is replaced by <span class="math notranslate nohighlight">\(M\)</span>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="MCCliquetEngine.html" class="btn btn-neutral float-right" title="Internal Design of Cliquet Option Pricing Engine" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="MCDigitalEngine.html" class="btn btn-neutral" title="Internal Design of Digital Option Pricing Engines" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Xilinx Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>