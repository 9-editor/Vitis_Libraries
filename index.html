

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Vitis Quantitative Finance Library &mdash; Vitis Quantitative Finance Library 1.0 pre-alpha documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/xilinx-favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Requirements" href="overview.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> Vitis Quantitative Finance Library
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Library Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#trademark-notice">Trademark Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="rel.html">Release Note</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="models_and_methods.html">Pricing Models and Numerical Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide_L1/L1.html">L1 Module User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide_L2/L2.html">L2 Pricing Engine Kernel User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide_L3/L3.html">L3 Overlay User Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Benchmark Result</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="benchmark/benchmark.html">Quality and Performance</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Vitis Quantitative Finance Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Vitis Quantitative Finance Library</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vitis-quantitative-finance-library">
<h1>Vitis Quantitative Finance Library<a class="headerlink" href="#vitis-quantitative-finance-library" title="Permalink to this headline">¶</a></h1>
<p>The Vitis Quantitative Finance Library is a Vitis Library aimed at providing a comprehensive FPGA acceleration library for quantitative finance.
It is an open-source library that can be used in a variety of financial applications, such as modeling, trading, evaluation and risk management.</p>
<p>The Vitis Quantitative Finance Library provides extensive APIs at three levels of abstraction:</p>
<ul class="simple">
<li>L1, the basic functions heavily used in higher level implementations. It includes statistical functions such as Random Number Generation (RNG), numerical methods, e.g., Monte Carlo Simulation, and linear algebra functions such as Singular Value Decomposition (SVD), and tridiagonal and pentadiagonal matrix solvers.</li>
<li>L2, the APIs provided at the level of pricing engines. Various pricing engines are provided to evaluate different financial derivatives, including equity products, interest-rate products, foreign exchange (FX) products, and credit products. At this level, each pricing engine API can be seen as a kernel. The customers may write their own CPU code to call different pricing engines under the framework of OpenCL.</li>
<li>L3, the software level APIs. APIs of this level hide the details of data transfer, kernel related resources configuration, and task scheduling in OpenCL. Software application programmers may quickly use L3 high-level APIs to run various pricing options without touching the dependency of OpenCL tasks and hardware configurations.</li>
</ul>
<div class="section" id="library-contents">
<h2>Library Contents<a class="headerlink" href="#library-contents" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="shell-environment">
<h2>Shell Environment<a class="headerlink" href="#shell-environment" title="Permalink to this headline">¶</a></h2>
<p>Setup the build environment using the Vitis and XRT scripts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ source &lt;install path&gt;/Vitis/2019.2/settings64.sh
$ source /opt/xilinx/xrt/setup.sh
</pre></div>
</div>
</div>
<div class="section" id="design-flows">
<h2>Design Flows<a class="headerlink" href="#design-flows" title="Permalink to this headline">¶</a></h2>
<p>Recommended design flows are categorised by the target level:</p>
<ul class="simple">
<li>L1</li>
<li>L2</li>
<li>L3</li>
</ul>
<p>The common tool and library prerequisites that apply across all design flows are documented in the requirements section.</p>
<div class="section" id="l1">
<h3>L1<a class="headerlink" href="#l1" title="Permalink to this headline">¶</a></h3>
<p>L1 provides the low-level primitives used to build kernels.</p>
<p>The recommend flow to evaluate and test L1 components uses the Vivado HLS tool. A top level C/C++ testbench (typically <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code>) prepares the input data, passes this to the design under test (typically <code class="docutils literal notranslate"><span class="pre">dut.cpp</span></code> which makes the L1 level library calls) then performs any output data post-processing and validation checks.</p>
<p>A Makefile is used to drive this flow with available steps including <code class="docutils literal notranslate"><span class="pre">CSIM</span></code> (high level simulation), <code class="docutils literal notranslate"><span class="pre">CSYNTH</span></code> (high level synthesis to RTL) and <code class="docutils literal notranslate"><span class="pre">COSIM</span></code> (cosimulation between software testbench and generated RTL). The flow is launched from the shell by calling <code class="docutils literal notranslate"><span class="pre">make</span></code> with variables set as in the example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ . /opt/xilinx/xrt/setup.sh
$ export PLATFORM_REPO_PATHS=/opt/xilinx/platforms
$ cd L1/tests/ICD/
$ make CSIM=1 CSYNTH=0 COSIM=0 DEVICE=xilinx_u250_xdma_201830_2 check # Only run C++ simulation
</pre></div>
</div>
<p>As well as verifying functional correctness, the reports generated from this flow give an indication of logic utilisation, timing performance, latency and throughput. The output files of interest can be located at the example locations as shown below where the file names are correlated with the source code, i.e., the callable functions within the design under test.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Simulation</span> <span class="n">Log</span><span class="p">:</span> <span class="n">L1</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">ICD</span><span class="o">/</span><span class="n">prj</span><span class="o">/</span><span class="n">sol</span><span class="o">/</span><span class="n">csim</span><span class="o">/</span><span class="n">report</span><span class="o">/</span><span class="n">ICN_top_csim</span><span class="o">.</span><span class="n">log</span>
<span class="n">Synthesis</span> <span class="n">Report</span><span class="p">:</span> <span class="n">L1</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">ICD</span><span class="o">/</span><span class="n">prj</span><span class="o">/</span><span class="n">sol</span><span class="o">/</span><span class="n">syn</span><span class="o">/</span><span class="n">report</span><span class="o">/</span><span class="n">ICN_top_csynth</span><span class="o">.</span><span class="n">rpt</span>
</pre></div>
</div>
</div>
<div class="section" id="l2">
<h3>L2<a class="headerlink" href="#l2" title="Permalink to this headline">¶</a></h3>
<p>L2 provides the pricing engine APIs presented as kernels.</p>
<p>The available flow for L2 based around the SDAccel tool facilitates the generation and packaging of pricing engine kernels along with the required host application for configuration and control. In addition to supporting FPGA platform targets, emulation options are available for preliminary investigations or where dedicated access to a hardware platform may not be available. Two emulation options are available, software emulation which performs a high level simulation of the pricing engine and hardware emulation which performs a cycle accurate simulation of the generated RTL for the kernel. This flow is makefile driven from the console where the target is selected as a command line parameter as in the examples below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd L2/tests/McEuropeanEngine

# run one of the following, software emulation, hardware    emulation or actual deployment on physical platform
$ make run_sw_emu DEVICE=xilinx_u250_xdma_201830_2
$ make run_hw_emu DEVICE=xilinx_u250_xdma_201830_2
$ make run_hw DEVICE=xilinx_u250_xdma_201830_2

# after a hardware system build has been completed, execution  can be repeated by running the host executable and passing it   the xclbin as an argument
$ bin_xilinx_u250_xdma_201830_2/test.exe -mode fpga -xclbin xclbin_xilinx_u250_xdma_201830_2_sw_emu/kernel_mcae.xclbin
</pre></div>
</div>
<p>The outputs of this flow are packaged kernel binaries (xclbin files) that can be downloaded to the FPGA platform, and host executables to configure and co-ordinate data transfers. The output files of interest can be located at the example locations as shown below where the file names are correlated with the source code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span> <span class="n">Executable</span><span class="p">:</span> <span class="n">L2</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">McEuropeanEngine</span><span class="o">/</span><span class="n">bin_xilinx_u250_xdma_201830_2</span><span class="o">/</span><span class="n">test</span><span class="o">.</span><span class="n">exe</span>
<span class="n">Kernel</span> <span class="n">Packaged</span> <span class="n">Binary</span><span class="p">:</span> <span class="n">L2</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">McEuropeanEngine</span><span class="o">/</span><span class="n">xclbin_xilinx_u250_xdma_201830_2_sw_emu</span><span class="o">/</span><span class="n">kernel_mcae</span><span class="o">.</span><span class="n">xclbin</span>
</pre></div>
</div>
<p>This flow can be used to verify functional correctness in hardware and enable real world performance to be measured.</p>
</div>
<div class="section" id="l3">
<h3>L3<a class="headerlink" href="#l3" title="Permalink to this headline">¶</a></h3>
<p>L3 provides the high level software APIs to deploy and run pricing engine kernels whilst abstracting the low level details of data transfer, kernel related resources configuration, and task scheduling.</p>
<p>The flow for L3 is the only one where access to an FPGA platform is required.</p>
<p>A prerequisite of this flow is that the packaged pricing engine kernel binaries (xclbin files) for the target FPGA platform target have been made available for download or have been custom built using the L2 flow described above.</p>
<p>This flow is makefile driven from the console to initially generate a shared object (<code class="docutils literal notranslate"><span class="pre">L3/src/output/libxilinxfintech.so</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd L3/src
$ source env.sh
$ make
</pre></div>
</div>
<p>The shared object file is written to the example location as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Library</span><span class="p">:</span> <span class="n">L3</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">output</span><span class="o">/</span><span class="n">libxilinxfintech</span><span class="o">.</span><span class="n">so</span>
</pre></div>
</div>
<p>User applications can subsequently be built against this library as in the example provided:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd L3/examples/MonteCarlo
$ make all
$ cd output

# manual step to copy or create symlinks to xclbin files in current directory

$ ./mc_example
</pre></div>
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Library Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#trademark-notice">Trademark Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="rel.html">Release Note</a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="models_and_methods.html">Pricing Models and Numerical Methods</a><ul>
<li class="toctree-l2"><a class="reference internal" href="models_and_methods.html#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="models_and_methods.html#numerical-methods">Numerical Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="models_and_methods.html#closed-form-solution-methods">Closed-Form Solution Methods</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guide_L1/L1.html">L1 Module User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="guide_L1/L1.html#core-utility">Core Utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_L1/L1.html#l1-module-apis">L1 Module APIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guide_L2/L2.html">L2 Pricing Engine Kernel User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="guide_L2/overview.html">Pricing Engine Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_L2/kernel_design.html">Pricing Engine Kernel Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_L2/kernel_api.html">Pricing Engine Kernel APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_L2/kernel_benchmark.html">Pricing Engines Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_L2/other_engines.html">Other Engine Kernel Design</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guide_L3/L3.html">L3 Overlay User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="guide_L3/framework/getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_L3/framework/device_enumeration.html">Device Enumeration</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_L3/framework/running_a_model.html">Running a Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_L3/models/models.html">Available Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_L3/framework/framework_classes.html">Framework Classes</a></li>
</ul>
</li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Benchmark Result</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="benchmark/benchmark.html">Quality and Performance</a></li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="overview.html" class="btn btn-neutral float-right" title="Requirements" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Xilinx Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>